window.EUI={version:"1.0.0",namespace:function(){var f,e,c;for(var b=0;b<arguments.length;b++){e=arguments[b].split(".");f=window[e[0]]=window[e[0]]||{};c=e.slice(1);for(var a=0;a<c.length;a++){f=f[c[a]]=f[c[a]]||{}}}return f},BLANK_IMAGE_URL:"http://"+window.location.host+"/EasyFee/UI/resources/images/s.gif",managers:{},managerCount:0,zindex:100,isDefined:function(a){return typeof a!=="undefined"},getId:function(a){var b=a?a:"";var c=b+(1000+EUI.managerCount);EUI.managerCount++;return c},applyIf:function(b,d){if(b){for(var a in d){if(!EUI.isDefined(b[a])){b[a]=d[a]}}}return b},apply:function(d,e,b){if(!d){d={}}if(b){EUI.apply(d,b)}if(e&&typeof e=="object"){for(var a in e){d[a]=e[a]}}return d},applyHave:function(b,d){if(b&&d&&typeof d=="object"){for(var a in b){if(d[a]!=undefined&&d[a]!=null){b[a]=d[a]}}}return b},override:function(a,c){if(c){var b=a.prototype;EUI.apply(b,c);if(c.hasOwnProperty("toString")){b.toString=c.toString}}},extend:function(){var b=function(d){for(var c in d){this[c]=d[c]}};var a=Object.prototype.constructor;return function(h,e,g){if(typeof e=="object"){g=e;e=h;h=g.constructor!=a?g.constructor:function(){e.apply(this,arguments)}}var d=function(){},f,c=e.prototype;d.prototype=c;f=h.prototype=new d();f.constructor=h;h.superclass=c;if(c.constructor==a){c.constructor=e}h.override=function(i){EUI.override(h,i)};f.superclass=f.supr=(function(){return c});f.override=b;EUI.override(h,g);h.extend=function(i){return EUI.extend(h,i)};return h}}(),remove:function(a){var c=null;if(typeof a=="string"){c=this.managers[a]}else{if(typeof a=="object"&&a instanceof EUI.UIComponent){c=this.managers[a.id]}}if(c){if(c.items){for(var b=0;b<c.items.length;b++){this.remove(EUI.getCmp(c.items[b]))}}c.remove()}},getCmp:function(){return EUI.managers[arguments[0]]},resizeAll:function(){var a=EUI.managers;for(var b in a){if(a[b]||a[b].type=="Window"&&a[b].ismax===true){a[b].onResize()}}},resize:function(){var b=arguments[0];b.onResize();if(b.items){for(var a=0;a<b.items.length;a++){EUI.resize(EUI.getCmp(b.items[a]))}}},onReady:function(){if(arguments){$(window).load(arguments[0])}},importJs:function(d,c,b){var a=function(g,i,k,e,h){$.ajax({url:g[e],dataType:"script",cache:k==undefined?true:false,success:function(f){if(e==(h-1)){i.call(i,f)}else{e++;a(g,i,k,e,h)}}})};if(d instanceof Array){a(d,c,b,0,d.length)}else{a([d],c,b,0,1)}},toArray:function(){return function(b,d,c){return Array.prototype.slice.call(b,d||0,c||b.length)}}(),checkAuth:function(a){return true}};EUI.UIComponent=function(a){this.options=a||{};EUI.apply(this,a);this.genCmpId();this.initComponent();return this};EUI.UIComponent.prototype={id:null,renderTo:null,options:null,items:null,getType:function(){return"UIComponent"},genCmpId:function(){var a=this.options;if(!a||(!a.id&&!a.renderTo)){var b=this.getType();this.id=b+(1000+EUI.managerCount);EUI.managerCount++}else{this.id=a.id?a.id:a.renderTo;if(EUI.managers[this.id]){throw new Error(String.format(EUI.error.managerIsExist,this.id))}}},initComponent:function(){this.initItems();this.initDom();this.preRender();this.render();EUI.managers[this.id]=this;this.addItems();this.afterRender()},initItems:function(){var a=this.options.items;if(a){this.items=[];for(var b=0;b<a.length;b++){a[b].parentCmp=this.id}}},initDom:function(){this.dom=this.renderTo?$("#"+this.renderTo):$("<div></div>");this.dom.attr("id",this.id)},preRender:function(){},render:function(){},afterRender:function(){if(this.style){this.dom.css(this.style)}if(this.hidden){this.dom.hide()}},addItems:function(){var items=this.options.items;if(items){for(var i=0;i<items.length;i++){var item=items[i];EUI.applyIf(item,this.defaultConfig);EUI.applyIf(item,this.defaultStyle);var xtype=item.xtype;if(!xtype){throw new Error(EUI.error.noXtype)}var cmp=eval("EUI."+xtype);if(!cmp){throw new Error(String.format(EUI.error.noCmp,xtype))}cmp=cmp.call(cmp,item);this.items.push(cmp.id)}}},show:function(){this.dom&&this.dom.show();this.changeVisiable(true)},hide:function(){this.dom&&this.dom.hide();this.changeVisiable(false)},changeVisiable:function(a){},getDom:function(){return this.dom},onResize:function(){},remove:function(){this.dom.remove();delete EUI.managers[this.id];if(!this.items){return}for(var a=0;a<this.items.length;a++){var b=EUI.getCmp(this.items[a]);b&&b.remove()}}};EUI.CustomUI=function(){EUI.apply(this,arguments[0]);this.initComponent();return this};EUI.CustomUI.prototype={lang:{},initComponent:function(){}};(function(a){a(window).bind("resize",function(){EUI.resizeAll()});EUI.ns=EUI.namespace;EUI.ns("EUI.core","EUI.util","EUI.container","EUI.grid","EUI.msg","EUI.form","EUI.layout","EUI.window","EUI.widgets","EUI.data","EUI.other","EUI.calendar");Date.prototype.format=function(b){var d={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};if(/(y+)/.test(b)){b=b.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))}for(var c in d){if(new RegExp("("+c+")").test(b)){b=b.replace(RegExp.$1,(RegExp.$1.length==1)?(d[c]):(("00"+d[c]).substr((""+d[c]).length)))}}return b};EUI.applyIf(String,{format:function(c){var b=EUI.toArray(arguments,1);return c.replace(/\{(\d+)\}/g,function(d,e){return b[e]})}});EUI.applyIf(Object,{isEmpty:function(c){for(var b in c){return false}return true},toFormValue:function(b,f){if(!b){return b}var c=/%20/g;var d=[];if(f===undefined){f=jQuery.ajaxSettings.traditional}if(jQuery.isArray(b)||b.jquery){jQuery.each(b,function(){h(this.name,this.value)})}else{for(var g in b){e(g,b[g])}}return d.join("&").replace(c,"+");function e(i,j){if(jQuery.isArray(j)){jQuery.each(j,function(l,k){if(f){h(i,k)}else{e(i+"["+(typeof k==="object"||jQuery.isArray(k)?l:"")+"]",k)}})}else{if(!f&&j!=null&&typeof j==="object"){jQuery.each(j,function(m,l){e(i+"."+m,l)})}else{h(i,j)}}}function h(i,j){j=jQuery.isFunction(j)?j():j;if(j==null){d[d.length]=encodeURIComponent(i)+"="}else{d[d.length]=encodeURIComponent(i)+"="+encodeURIComponent(j)}}}})})(jQuery);EUI.util={getUrlParam:function(a){var b=new RegExp("(^|&)"+a+"=([^&]*)(&|$)");var c=window.location.search.substr(1).match(b);if(c!=null){return unescape(c[2])}return null}};EUI.Store=function(){return new EUI.data.Store(arguments[0])};EUI.data.Store=function(){EUI.apply(this,arguments[0]);if(this.autoLoad==true){this.doLoad()}};EUI.apply(EUI.data.Store.prototype,{url:null,data:null,async:true,type:"POST",params:null,autoLoad:true,dataType:"json",postType:"form",timeout:0,cache:true,success:null,failure:null,loaded:false,contentType:"application/x-www-form-urlencoded",doLoad:function(){var a=arguments[0]?arguments[0]:this;this.transParams(a);$.ajax({url:a.url,type:a.type,dataType:a.dataType,timeout:a.timeout,async:a.async,contentType:a.contentType,data:a.params?a.postParam:undefined,success:function(b){if(typeof b=="string"){if(a.failure){a.failure.call(this,arguments[0])}}else{a.loaded=true;if(a.success){a.success.call(this,arguments[0])}}},error:function(){var c=arguments[0].responseText.trim();if(c.indexOf("登录界面")!=-1){window.parent.location.reload();return}var b="";try{b=JSON.parse(c)}catch(d){}if(a.failure){a.failure.call(this,b)}}})},load:function(){var a=arguments[0]||{};EUI.applyIf(a,this);a.autoLoad=true;this.doLoad(a)},transParams:function(){var a=arguments[0];a.postParam={};EUI.apply(a.postParam,a.params);if(a.postType=="json"){JSON.stringify(a.postParam);a.contentType="application/json;charset=utf-8"}else{if(a.postType=="form"){a.postParam=Object.toFormValue(a.postParam,true)}}}});EUI.LoadMask=function(a){return new EUI.other.LoadMask(a)};EUI.other.LoadMask=EUI.extend(EUI.UIComponent,{targetDom:null,msg:null,initComponent:function(){EUI.other.LoadMask.superclass.initComponent.call(this)},getType:function(){return"LoadMask"},initDom:function(){},render:function(){var a;if(this.target instanceof EUI.UIComponent){this.targetDom=this.target.dom}else{if(!this.target||this.target.length==0){this.targetDom=$("body")}else{this.targetDom=this.target}}this.dom=$("<div class='ux-loadmask-div'><div class='ux-loadmask-box'><span class='ux-loadmask-icon'></span><span class='ux-loadmask-msg'>"+this.msg+"</span></div></div>");$("body").append(this.dom);this.setShadow();this.setPosition();this.shadow.css("z-index",++EUI.zindex);this.dom.css("z-index",++EUI.zindex)},hide:function(){this.dom.remove();this.shadow.remove()},setMsg:function(a){$(".ux-loadmask-msg",this.dom).html(a);return this},setShadow:function(){this.shadow=$("<div class='ux-shadow'></div>");$("body").append(this.shadow)},setPosition:function(){var a=this.targetDom.outerHeight();var b=this.targetDom.outerWidth();if(this.targetDom[0].tagName.toUpperCase()=="BODY"){a=$(window).height();b=$(window).width()}var c=this.targetDom.offset();this.dom.css({height:a+"px",width:b+"px","line-height":a+"px",top:c.top,left:c.left});this.shadow.css({height:a+"px",width:b+"px",top:c.top,left:c.left})},onResize:function(){this.setPosition()},remove:function(){this.shadow.remove();EUI.other.LoadMask.superclass.remove.call(this)}});EUI.Button=function(a){return new EUI.other.Button(a)};EUI.other.Button=EUI.extend(EUI.UIComponent,{title:null,width:null,height:null,disable:false,selected:false,CHECK_AUTH:null,domCss:"ux-button",disableCss:null,selectCss:"ux-button-select",handler:null,initComponent:function(){if(this.CHECK_AUTH){if(EUI.checkAuth(this.CHECK_AUTH)){EUI.other.Button.superclass.initComponent.call(this)}}else{EUI.other.Button.superclass.initComponent.call(this)}},getType:function(){return"Button"},render:function(){if(this.selected){this.dom.addClass(this.selectCss)}else{this.dom.addClass(this.domCss)}if(this.width){this.dom.css("width",this.width)}if(this.height){this.dom.css("height",this.height+"px");this.dom.css("line-height",this.height+"px")}this.setTitle(this.title);this.setDisable(this.disable);this.initEvents()},setTitle:function(a){this.dom.html(a)},setDisable:function(a){if(a){this.dom.addClass(this.disableCss)}else{this.dom.removeClass(this.disableCss)}this.disable=a},setSelected:function(a){if(a){if(this.selected){return}else{this.dom.addClass(this.selectCss).removeClass(this.domCss);this.selected=true}}else{if(!this.selected){return}else{this.dom.removeClass(this.selectCss).addClass(this.domCss);this.selected=false}}},initEvents:function(){var a=this;if(a.handler&&typeof a.handler=="function"){a.dom.click(function(){if(a.disable){return false}a.handler.call(a);return false})}}});EUI.Calendar=function(){return new EUI.other.Calendar(arguments[0])};EUI.other.Calendar=EUI.extend(EUI.UIComponent,{format:"Y-m-d",domCss:"ux-date",width:210,height:220,callback:null,showDate:null,maxDate:null,minDate:null,initComponent:function(){EUI.other.Calendar.superclass.initComponent.call(this)},getType:function(){return"Calendar"},render:function(){var c=this;c.dom.addClass(c.domCss);c.setWidth(c.width);c.setHeight(c.height);c.initHeader();c.initBody();c.buttons={btnPrevYear:$(".ux-box-dateeditor-header-prevyear",c.header),btnNextYear:$(".ux-box-dateeditor-header-nextyear",c.header),btnPrevMonth:$(".ux-box-dateeditor-header-prevmonth",c.header),btnNextMonth:$(".ux-box-dateeditor-header-nextmonth",c.header),btnYear:$(".ux-box-dateeditor-header-year",c.header),btnMonth:$(".ux-box-dateeditor-header-month",c.header)};var a=new Date();c.now={year:a.getFullYear(),month:a.getMonth()+1,day:a.getDay(),date:a.getDate(),hour:a.getHours(),minute:a.getMinutes()};if(this.showDate){var b=new Date(this.showDate);c.currentDate={year:b.getFullYear(),month:b.getMonth()+1,day:b.getDay(),date:b.getDate(),hour:b.getHours(),minute:b.getMinutes()}}else{c.currentDate={year:a.getFullYear(),month:a.getMonth()+1,day:a.getDay(),date:a.getDate(),hour:a.getHours(),minute:a.getMinutes()}}c.selectedDate=c.currentDate;c.usedDate=null;c.initDate();c.bulidContent();c.addEvents()},setWidth:function(){var a=parseInt(arguments[0]);if(a){this.dom.width(a)}},setHeight:function(){var a=parseInt(arguments[0]);if(a){this.dom.height(a)}},initHeader:function(){var a=this;var b="";b+="<div class='ux-box-dateeditor-header'>";b+="<div class='ux-box-dateeditor-header-btn ux-box-dateeditor-header-prevyear'><span></span></div>";b+="<div class='ux-box-dateeditor-header-btn ux-box-dateeditor-header-prevmonth'><span></span></div>";b+="<div class='ux-box-dateeditor-header-text'><a class='ux-box-dateeditor-header-month'></a>  <a  class='ux-box-dateeditor-header-year'></a></div>";b+="<div class='ux-box-dateeditor-header-btn ux-box-dateeditor-header-nextmonth'><span></span></div>";b+="<div class='ux-box-dateeditor-header-btn ux-box-dateeditor-header-nextyear'><span></span></div>";b+="</div>";a.header=$(b);a.dom.append(a.header)},initBody:function(){var b=this;var a="";a+="<div class='ux-box-dateeditor-body'>";a+="<table cellpadding='0' cellspacing='0' border='0' class='ux-box-dateeditor-calendar'>";a+="<thead>";a+="<tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr>";a+="</thead>";a+="<tbody>";a+="<tr class='ux-first'><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr>";a+="</tbody>";a+="</table>";a+="<ul class='ux-box-dateeditor-monthselector'><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>";a+="<ul class='ux-box-dateeditor-yearselector'><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>";a+="<ul class='ux-box-dateeditor-hourselector'><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>";a+="<ul class='ux-box-dateeditor-minuteselector'><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>";a+="</div>";b.body=$(a);b.dom.append(b.body);b.body.thead=$("thead",b.body);b.body.tbody=$("tbody",b.body);b.body.monthselector=$(".ux-box-dateeditor-monthselector",b.body);b.body.yearselector=$(".ux-box-dateeditor-yearselector",b.body);b.body.hourselector=$(".ux-box-dateeditor-hourselector",b.body);b.body.minuteselector=$(".ux-box-dateeditor-minuteselector",b.body)},initDate:function(){var a=this;$("td",a.body.thead).each(function(b,c){$(c).html(EUI.other.Calendar.week[b])});$("li",a.body.monthselector).each(function(c,b){$(b).html(EUI.other.Calendar.month[c])})},addEvents:function(){var a=this;$("td",a.body.tbody).hover(function(){if($(this).hasClass("ux-box-dateeditor-today")){return}$(this).addClass("ux-box-dateeditor-over")},function(){$(this).removeClass("ux-box-dateeditor-over")}).click(function(){$(".ux-box-dateeditor-selected",a.body.tbody).removeClass("ux-box-dateeditor-selected");if(!$(this).hasClass("ux-box-dateeditor-today")){$(this).addClass("ux-box-dateeditor-selected")}a.currentDate.date=parseInt($(this).html());a.currentDate.day=new Date(a.currentDate.year,a.currentDate.month-1,1).getDay();if($(this).hasClass("ux-box-dateeditor-out")){if($("tr",a.body.tbody).index($(this).parent())==0){if(--a.currentDate.month==0){a.currentDate.month=12;a.currentDate.year--}}else{if(++a.currentDate.month==13){a.currentDate.month=1;a.currentDate.year++}}}a.selectedDate={year:a.currentDate.year,month:a.currentDate.month,date:a.currentDate.date};a.setDate();return false});$(".ux-box-dateeditor-header-btn",a.header).hover(function(){$(this).addClass("ux-box-dateeditor-header-btn-over")},function(){$(this).removeClass("ux-box-dateeditor-header-btn-over")});a.buttons.btnYear.click(function(){if(!a.body.yearselector.is(":visible")){$("li",a.body.yearselector).each(function(c){var b=a.currentDate.year+(c-4);if(b==a.currentDate.year){$(this).addClass("ux-selected")}else{$(this).removeClass("ux-selected")}$(this).html(b)})}a.body.yearselector.slideToggle();return false});$("li",a.body.yearselector).click(function(){a.currentDate.year=parseInt($(this).html());a.body.yearselector.slideToggle();a.bulidContent();return false});a.buttons.btnMonth.click(function(){$("li",a.body.monthselector).each(function(b){if(a.currentDate.month==b+1){$(this).addClass("ux-selected")}else{$(this).removeClass("ux-selected")}});a.body.monthselector.slideToggle();return false});$("li",a.body.monthselector).click(function(){var b=$("li",a.body.monthselector).index(this);a.currentDate.month=b+1;a.body.monthselector.slideToggle();a.bulidContent();return false});a.buttons.btnPrevMonth.click(function(){if(--a.currentDate.month==0){a.currentDate.month=12;a.currentDate.year--}a.bulidContent();return false});a.buttons.btnNextMonth.click(function(){if(++a.currentDate.month==13){a.currentDate.month=1;a.currentDate.year++}a.bulidContent();return false});a.buttons.btnPrevYear.click(function(){a.currentDate.year--;a.bulidContent();return false});a.buttons.btnNextYear.click(function(){a.currentDate.year++;a.bulidContent();return false})},setDate:function(){var d=this;if(!this.selectedDate){return}var c=d.selectedDate.year;var e=d.selectedDate.month;var a=d.selectedDate.date;if(e<10){e="0"+e}if(a<10){a="0"+a}var b=d.format;b=b.replace(/Y/g,d.selectedDate.year);b=b.replace(/m/g,e);b=b.replace(/d/g,a);if(d.callback){d.callback.call(this,b)}},bulidContent:function(){var d=this;var b=new Date(d.currentDate.year,d.currentDate.month-1,1).getDay();var a=d.currentDate.month;var f=d.currentDate.year;if(++a==13){a=1;f++}var e=new Date(f,a-1,0).getDate();var c=new Date(d.currentDate.year,d.currentDate.month-1,0).getDate();d.buttons.btnMonth.html(EUI.other.Calendar.month[d.currentDate.month-1]);d.buttons.btnYear.html(d.currentDate.year);$("td",this.body.tbody).each(function(){this.className=""});$("tr",this.body.tbody).each(function(g,h){$("td",h).each(function(k,m){var l=g*7+(k-b);var i=l+1;if(d.selectedDate&&d.currentDate.year==d.selectedDate.year&&d.currentDate.month==d.selectedDate.month&&l+1==d.selectedDate.date){if(k==0||k==6){$(m).addClass("ux-box-dateeditor-holiday")}$(m).addClass("ux-box-dateeditor-selected");$(m).siblings().removeClass("ux-box-dateeditor-selected")}else{if(d.currentDate.year==d.now.year&&d.currentDate.month==d.now.month&&l+1==d.now.date){if(k==0||k==6){$(m).addClass("ux-box-dateeditor-holiday")}$(m).addClass("ux-box-dateeditor-today")}else{if(l<0){i=c+i;$(m).addClass("ux-box-dateeditor-out").removeClass("ux-box-dateeditor-selected")}else{if(l>e-1){i=i-e;$(m).addClass("ux-box-dateeditor-out").removeClass("ux-box-dateeditor-selected")}else{if(k==0||k==6){$(m).addClass("ux-box-dateeditor-holiday").removeClass("ux-box-dateeditor-selected")}else{m.className=""}}}}}$(m).html(i)});if($("td.ux-box-dateeditor-holiday",h).length==0){d.setHeight(220)}else{d.setHeight(242)}})},isDateTime:function(a){var b=a.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/);if(b==null){return false}var c=new Date(b[1],b[3]-1,b[4]);if(c=="NaN"){return false}return(c.getFullYear()==b[1]&&(c.getMonth()+1)==b[3]&&c.getDate()==b[4])},isLongDateTime:function(a){var b=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2})$/;var c=a.match(b);if(c==null){return false}var e=new Date(c[1],c[3]-1,c[4],c[5],c[6]);if(e=="NaN"){return false}return(e.getFullYear()==c[1]&&(e.getMonth()+1)==c[3]&&e.getDate()==c[4]&&e.getHours()==c[5]&&e.getMinutes()==c[6])},getFormatDate:function(b){var c=this;if(b=="NaN"){return null}var d=c.format;var e={"M+":b.getMonth()+1,"d+":b.getDate(),"h+":b.getHours(),"m+":b.getMinutes(),"s+":b.getSeconds(),"q+":Math.floor((b.getMonth()+3)/3),S:b.getMilliseconds()};if(/(y+)/.test(d)){d=d.replace(RegExp.$1,(b.getFullYear()+"").substr(4-RegExp.$1.length))}for(var a in e){if(new RegExp("("+a+")").test(d)){d=d.replace(RegExp.$1,RegExp.$1.length==1?e[a]:("00"+e[a]).substr((""+e[a]).length))}}return d},getValue:function(){return this.usedDate}});EUI.MessageBox=function(a){return new EUI.msg.MessageBox(a)};EUI.msg.MessageBox=EUI.extend(EUI.UIComponent,{title:"提示消息",msg:"",buttons:null,showClose:true,initComponent:function(){EUI.msg.MessageBox.superclass.initComponent.call(this)},getType:function(){return"MessageBox"},initDom:function(){this.dom=$("<div class='ux-msgbox'><div class='ux-msgbox-titlebar'><span class='ux-msgbox-title'>"+this.title+"</span><span class='ux-msgbox-close'></span></div><div class='ux-msgbox-content'><div>"+this.msg+"</div><div class='ux-msgbox-optbox'></div></div></div>");$("body").append(this.dom);this.setShadow();this.setPosition();this.shadow.css("z-index",++EUI.zindex);this.dom.css("z-index",++EUI.zindex)},render:function(){this.initButtons();this.addEvents()},initButtons:function(){if(this.buttons){var a=$(".ux-msgbox-optbox",this.dom);for(var c=0;c<this.buttons.length;c++){var d=this.buttons[c].id||EUI.getId("Button");var b="<div id='"+d+"'></div>";a.append(b);EUI.applyIf(this.buttons[c],{xtype:"Button",renderTo:d});EUI.Button(this.buttons[c])}}},addEvents:function(){var a=this;if(!this.showClose){$(".ux-msgbox-close",this.dom).hide()}else{$(".ux-msgbox-close",this.dom).bind("click",function(){a.remove()})}},setTitle:function(a){$(".ux-msgbox-title",this.dom).html(a)},setMsg:function(a){$(".ux-msgbox-content",this.dom).html(title)},setShadow:function(){this.shadow=$("<div class='ux-shadow'></div>");$("body").append(this.shadow)},setPosition:function(){var a=$(window).height();var b=$(window).width();var d=(b-this.dom.width())/2;var c=(a-this.dom.height())/2;if(c>100){c-=50}this.dom.css({top:c,left:d});this.shadow.css({height:a+"px"})},onResize:function(){this.setPosition()},remove:function(){this.shadow.remove();EUI.msg.MessageBox.superclass.remove.call(this)},hide:function(){this.remove()}});EUI.ProcessStatus=function(a){return new EUI.msg.ProcessStatus(a)};EUI.msg.ProcessStatus=EUI.extend(EUI.UIComponent,{width:260,height:65,showTime:4,initComponent:function(){EUI.msg.ProcessStatus.superclass.initComponent.call(this);if(status.success){this.showTime=2}},getType:function(){return"ProcessStatus"},genCmpId:function(){this.id="eui_status"},render:function(){var a=EUI.getCmp("eui_status");if(a){a.remove()}this.dom.addClass("ux-status");if(!this.success){this.dom.addClass("ux-status-error")}$("body").append(this.dom);this.show();this.addEvents()},show:function(){var b=this;var a="<div class='ux-status-content'>"+this.msg+"</div><span class='ux-status-close'></span>";this.dom.append(a);this.setPosition();setTimeout(function(){b.remove()},b.showTime*1000)},addEvents:function(){var a=this;$(".ux-status-close").bind("click",function(){a.remove()})},setPosition:function(){this.dom.css({top:10,left:($(window).width()-this.dom.width())/2}).slideDown("normal")},onResize:function(){var a=this;a.setPosition();a.dom.css({left:a.showLeft,top:a.showTop})},remove:function(){var a=this;this.dom.slideUp("normal",function(){a.dom.remove()})}});EUI.Container=function(){return new EUI.container.Container(arguments[0])};EUI.container.Container=EUI.extend(EUI.UIComponent,{layout:"form",title:null,padding:6,border:false,width:"100%",height:"100%",isOverFlow:true,defaultStyle:null,domCss:"ux-container",borderCss:"ux-container-border",initComponent:function(){EUI.container.Container.superclass.initComponent.call(this)},getType:function(){return"Container"},render:function(){var a=this;a.dom.addClass(a.domCss);if(a.padding){a.dom.css({padding:a.padding})}if(!a.isOverFlow){a.dom.css("overflow","hidden")}else{a.dom.css("overflow","auto")}if(this.title){this.initTitle()}a.setWidth(a.width);a.setHeight(a.height);if(a.border){a.showBorder()}},showBorder:function(){this.dom.addClass(this.borderCss)},initTitle:function(){},setWidth:function(){var b=parseFloat(arguments[0]);var a=this.dom.parent();if(b){if(typeof arguments[0]=="string"&&arguments[0].indexOf("%")>-1){b/=100;b*=this.dom.parent().width()}b-=parseFloat(this.dom.css("paddingLeft"))||0;b-=parseFloat(this.dom.css("paddingRight"))||0;b-=parseFloat(this.dom.css("marginLeft"))||0;b-=parseFloat(this.dom.css("marginRight"))||0;if(this.border){b-=2}if(this.dom.height()>a.height()){b-=17}this.dom.width(b);this.width=arguments[0]}},setHeight:function(){var a=parseFloat(arguments[0]);var c=this.dom.parent();if(a){if(!c.hasClass(this.rowCss)&&!c.hasClass(this.cellCss)&&!c.hasClass(this.columnCss)){var d=c.height();if(c[0].tagName.toLowerCase()=="body"){d=$(window).height();d-=(parseFloat(c.css("marginTop"))||0);d-=(parseFloat(c.css("marginBottom"))||0);d-=(parseFloat(c.css("paddingTop"))||0);d-=(parseFloat(c.css("paddingBottom"))||0)}if(typeof arguments[0]=="string"&&arguments[0].indexOf("%")>-1){a/=100;a*=d}a-=parseFloat(this.dom.css("marginTop"))||0;a-=parseFloat(this.dom.css("marginBottom"))||0;if(this.border){a-=2}if(this.padding){a-=2*this.padding}this.dom.height(a);this.height=arguments[0]}}else{this.dom.css("height","auto");if(this.dom.height()>c.height()){var b=this.dom.width();this.dom.width(b-17)}}},doLayout:function(){var a=arguments[0];switch(this.layout){case"form":if(a=="init"){EUI.FormLayout(this,"layout")}else{EUI.FormLayout(this,"resize")}break;case"column":if(a=="init"){EUI.ColumnLayout(this,"layout")}else{EUI.ColumnLayout(this,"resize")}break;case"border":if(a=="init"){EUI.BorderLayout(this,"layout")}else{EUI.BorderLayout(this,"resize")}break;case"accordion":if(a=="init"){EUI.AccordionLayout(this,"layout")}else{EUI.AccordionLayout(this,"resize")}break;case"auto":if(a=="init"){EUI.AutoLayout(this,"layout")}else{EUI.AutoLayout(this,"resize")}break;default:if(a=="init"){EUI.FormLayout(this,"layout")}else{EUI.FormLayout(this,"resize")}}},addItems:function(){if(this.html){this.getDom().append(this.html);return}var a=this.options.items;if(a){this.doLayout("init")}},onResize:function(){var a=this;if(typeof a.width=="string"&&a.width.indexOf("%")>-1){a.setWidth(a.width)}if(typeof a.height=="string"&&a.height.indexOf("%")>-1){a.setHeight(a.height)}a.doResize()},doResize:function(){var a=this.items;if(a){this.doLayout("resize")}}});EUI.GridPanel=function(){return new EUI.grid.GridPanel(arguments[0])};EUI.grid.GridPanel=EUI.extend(EUI.container.Container,{gridCss:"ux-grid",contentCss:"ux-panel-grid",padding:null,searchConfig:null,autoLoad:true,subheight:58,data:null,initComponent:function(){EUI.grid.GridPanel.superclass.initComponent.call(this)},getType:function(){return"GridPanel"},initGridCfg:function(){var c=$("<table id='g_"+this.id+"'></table>");c.addClass(this.gridCss);this.dom.append(c);var a=this.gridCfg;a.autowidth=true;this.initHeight(a);for(var b=0;b<a.colModel.length;b++){EUI.applyIf(a.colModel[b],{sortable:false})}if(a.hasPager!=false){a.hasPager=true;a.pager=a.pager||this.id+"_pager";c.after("<div id='"+a.pager+"'></div>");a.pager="#"+a.pager;a.pagerpos="center";if(!a.rowList){var f=a.rowNum=a.rowNum?a.rowNum:15;var d=[f,f+10,f+20,f+40,f+60,f+80];a.rowList=d}}if(a.loadonce==true){a.datatype="local"}var e={mtype:"post",pagerpos:"left",recordpos:"right",altRows:true,hidegrid:false,data:this.data||[],pgtext:EUI.cmpText.pgtext,viewrecords:true,rownumbers:true,loadError:function(h){if(h&&h.responseText){if(h.responseText.indexOf("登录界面")!=-1){window.parent.location.reload();return}var g={success:false,msg:h.responseText};EUI.ProcessStatus&&EUI.ProcessStatus({status:g})}},datatype:"json"};a=EUI.apply(e,a);this.grid=c.jqGrid(a);$("#gbox_"+c.attr("id")).css("border-style","none");$(a.pager).addClass("ui-jqgrid-pagerbar");if(a.loadonce==true&&this.autoLoad){this.refreshGrid()}},initHeight:function(a){if(this.height!="auto"){a.height=this.dom.height()-this.subheight;if(a.footerrow){a.height-=34}if(a.multihead){a.height-=28}if(a.caption){a.height-=31}if(a.hasPager!=false){a.height+=27}}else{a.height="auto"}},afterRender:function(){EUI.grid.GridPanel.superclass.afterRender.call(this);this.initGridCfg();this.postDataParam=EUI.apply({},this.grid.getGridParam("postData"));$("#gbox_"+this.id).css("border-style","none");this.dom.css("overflow","hidden");this.onResize()},localSearch:function(c){var h=this;var m=$.trim(c).toLowerCase();var a;if(!h.searchConfig||!h.searchConfig.searchCols){a=h.getGridCols().visibleCols.colsName}else{a=h.searchConfig.searchCols}if(!h.data){h.data=h.grid.jqGrid("getGridParam","data")}var j=h.data;if(m==""){h.setDataInGrid(j,true);return}else{if(j&&j.length==0){return}else{var e=[];for(var f=0;j&&f<j.length;f++){var n=j[f];for(var b=0;b<a.length;b++){var l=a[b];if(n[l]!=null){if(n[l].toString().toLowerCase().indexOf(m)>=0){e.push(n);break}}else{if(l.indexOf(".")!=-1){var d=l.split(".");if(n[d[0]]!=null&&n[d[0]][d[1]]!=null){if(n[d[0]][d[1]].toString().toLowerCase().indexOf(m)>=0){e.push(n);break}}}}}}h.setDataInGrid(e,true)}}},getGridCols:function(){var e=this,f={allCols:[],visibleCols:{colsName:[],colsLabel:[]}};var h=e.grid.getGridParam("colModel");var d=e.grid.getGridParam("colNames");for(var c=0;c<h.length;c++){var b=e.grid.getColProp(h[c].name);if(!b.hidden){f.visibleCols.colsName.push(h[c].name)}f.allCols.push(h[c].name)}for(var a=0;a<d.length;a++){f.visibleCols.colsLabel.push(d[a].label)}return f},setDataInGrid:function(c,a){var b=this;b.grid.jqGrid("clearGridData",true);b.grid.jqGrid("setGridParam",{datatype:"local",page:1,data:c}).trigger("reloadGrid");if(!a){b.data=c}},addRowData:function(b){if(b instanceof Array){for(var a=0;a<b.length;a++){this.grid.addRowData(b[a].id,b[a])}}else{this.grid.addRowData(b.id,b)}if(this.isLoadOnce()){this.data=this.grid.jqGrid("getGridParam","data")}},restore:function(){this.setDataInGrid(this.data)},refreshGrid:function(){var d=this,c=arguments,a;if(c.length>0&&EUI.isJsonObj(c[0])){a=c[0]}else{a=d.grid.jqGrid("getGridParam","postData")}if(d.grid.jqGrid("getGridParam","loadonce")){var b=d.grid.jqGrid("getGridParam","url");if(b){$.post(b,a,function(f){for(var e=0;e<c.length;e++){if(c[e] instanceof Function){c[1].call(d,f)}}d.grid.jqGrid("clearGridData",true);d.grid.jqGrid("setGridParam",{data:f,page:1}).trigger("reloadGrid");d.data=f})}}else{d.grid.jqGrid("setGridParam",{datatype:"json",page:1,postData:a}).trigger("reloadGrid")}},getRowData:function(){var b=this,a=arguments;if(a.length!=0){return b.grid.getRowData(a[0])}return null},setSelectRowById:function(){var b=this,a=arguments;if(a.length!=0){b.grid.resetSelection();b.grid.setSelection(a[0],true)}},getSelectRow:function(){var d=this;var e;var b=d.grid.jqGrid("getGridParam","multiselect");if(b){e=[];var a=d.grid.jqGrid("getGridParam","selarrrow");for(var c=0;c<a.length;c++){e.push(d.getRowData(a[c]))}}else{var f=d.grid.jqGrid("getGridParam","selrow");if(f){e=d.getRowData(f)}}return e},getGridData:function(){var c=this;var d=[];if(c.isLoadOnce()){d=c.grid.jqGrid("getGridParam","data")}else{var b=c.grid.getDataIDs();for(var a=0;a<b.length;a++){d.push(c.getRowData(b[a]))}}return d instanceof Array?d:[]},onResize:function(){EUI.grid.GridPanel.superclass.onResize.call(this);if(this.grid){if(this.height!="auto"){var a=this.dom.height()-this.subheight;if(this.gridCfg.footerrow){a-=34}if(this.gridCfg.multihead){a-=28}if(this.gridCfg.hasPager==false){a+=27}if(this.gridCfg.caption){a-=31}this.grid.jqGrid("setGridHeight",a);this.dom.css("overflow","hidden")}else{this.dom.css("overflow","auto")}}},setPostParams:function(e,b){var d=this;var a=this.grid;EUI.apply(this.postDataParam,e);var c=a.each(function(){if(this.grid&&typeof d.postDataParam==="object"){this.p.postData=d.postDataParam}});if(b){c.trigger("reloadGrid")}return c},setGridParams:function(c,a){var b=this.grid.jqGrid("setGridParam",c);if(a){b.trigger("reloadGrid")}this.postDataParam=EUI.apply({},this.grid.getGridParam("postData"))},setTitle:function(a){$(".ui-jqgrid-title",this.dom).html(a)},resetParam:function(){this.setPostParams(this.postDataParam)},reset:function(){this.setDataInGrid([]);this.data=[]},isLoadOnce:function(){return this.grid.jqGrid("getGridParam","loadonce")},deleteRow:function(a){this.grid.jqGrid("delRowData",a);if(this.isLoadOnce()){this.data=this.grid.jqGrid("getGridParam","data")}}});EUI.TabPanel=function(){return new EUI.container.TabPanel(arguments[0])};EUI.container.TabPanel=EUI.extend(EUI.container.Container,{maxWidth:200,maxTabs:20,padding:0,tabWidth:null,totalWidth:1,showTabMenu:true,overflowText:null,autoScroll:true,tabCss:"ux-tab",itemCloseCss:"ux-tab-item-close",ulCss:"ux-tab-ul",liCss:"ux-tab-li",aCss:"ux-tab-li-a",iconCss:"ux-tab-icon",headerCss:"ux-tab-header",contentCss:"ux-tab-content",activeCss:"ux-tab-actived",wrapCss:"ux-tab-wrap",disableLeft:"ux-tab-scrollLeft-disable",disableRight:"ux-tab-scrollRight-disable ",onActive:null,beforeClose:null,afterClose:null,initComponent:function(){EUI.container.TabPanel.superclass.initComponent.call(this)},getType:function(){return"TabPanel"},render:function(){EUI.container.TabPanel.superclass.render.call(this);this.tab=this.dom;this.initCmp();this.addEvents();this.setTabHeight()},showBorder:function(){},initCmp:function(){var e=this;var h=$("<div></div>").addClass(e.headerCss);var f=$("<div class='ux-tab-scroll scrollLeft'><span></span></div>").hide();var b=$("<div class='ux-tab-scroll scrollRight'><span></span></div>").hide();var a=$("<ul class='"+e.ulCss+"'></ul>").width(6000);var c=$("<div class='"+e.wrapCss+"'></div>");c.append(a);h.append(f).append(c).append(b);h.left=f;h.right=b;h.ul=a;h.wrap=c;var d=$("<div class='"+e.contentCss+"'></div>");e.tab.append(h).append(d);e.tab.header=h;e.tab.content=d;e.wrapWidth=c.width()},addEvents:function(){var a=this;a.tab.header.right.bind("click",function(){if($(this).hasClass(a.disableRight)){return}var e=$("li:last",a.tab.header.ul);var f=e.offset().left;var b=a.tab.header.right.offset().left;if(f+e.width()+1>b){var d=a.tab.header.ul;var g=d.offset().left;var c=a.tabWidth?a.tabWidth:120;c=g-c-a.tab.header.offset().left;if(f<=b){c=d.position().left-(e.width()+f+1-b)-2}d.animate({left:c},function(){if(e.offset().left+e.width()+2<=b){a.tab.header.right.addClass(a.disableRight)}})}a.tab.header.left.removeClass(a.disableLeft)});a.tab.header.left.bind("click",function(){if($(this).hasClass(a.disableLeft)){return}var f=$("li:first",a.tab.header.ul);var g=f.offset().left;var e=a.tab.header.left.offset().left;var d=a.tab.header.left.width();if(g<e+d+2){var c=a.tab.header.ul;var b=a.tabWidth?a.tabWidth:120;b+=c.position().left;if(g+f.width()>e+d+2){b=d}c.animate({left:b},function(){if(f.offset().left>=e+d+2){a.tab.header.left.addClass(a.disableLeft)}})}a.tab.header.right.removeClass(a.disableRight)});if(a.showTabMenu){$("."+a.liCss,a.dom).live("contextmenu",function(h){var c=$(this).attr("tabid");var b=$("."+a.liCss).index(this);var f=a.options.items[b];var d=false,g=f.closable;if(a.activeId==c&&f.iframe){d=true}a.showMenu($(this),d,g);return false});$(document).bind({blur:function(){a.hideMenu()},click:function(b){if($(b.target).parents(".ux-menu").length==0){a.hideMenu()}}})}},showMenu:function(f,a,c){var b=this;if(!this.menu){this.menu=$("<div class='ux-menu'><div class='ux-menu-yline'></div><div class='ux-menu-over' style='top: -24px;'><div class='ux-menu-over-l'></div> <div class='ux-menu-over-r'></div></div><div class='ux-menu-inner'><div class='ux-menu-item' type='refresh'><div class='ux-menu-icon ux-menu-refresh'></div><div class='ux-menu-title'>刷新</div></div><div class='ux-menu-xline'></div><div class='ux-menu-item' type='close'><div class='ux-menu-icon ux-menu-close'></div><div class='ux-menu-title'>关闭</div></div><div class='ux-menu-item' type='closeother'><div class='ux-menu-icon'></div><div class='ux-menu-title'>关闭其他</div></div><div class='ux-menu-item' type='closeall'><div class='ux-menu-icon'></div><div class='ux-menu-title'>关闭所有</div></div></div></div>");$("body").append(this.menu);var e=$(".ux-menu-over",b.menu);$(".ux-menu-item",this.menu).hover(function(){var g=$(this);e.css({top:g.position().top+4})},function(){e.css({top:-24})});$(".ux-menu-item",this.menu).bind("click",function(){var g=b.menu.attr("tabid");var h=$(this).attr("type");switch(h){case"refresh":b.refresh(g);break;case"close":b.close(g);break;case"closeother":b.closeOther(g);break;case"closeall":b.closeAll();break;default:break}b.hideMenu()})}this.menu.attr("tabid",f.attr("tabid"));this.menu.show();if(!a){$(".ux-menu-refresh",this.menu).parent().hide();$(".ux-menu-xline",this.menu).hide()}else{$(".ux-menu-refresh",this.menu).parent().show();$(".ux-menu-xline",this.menu).show()}if(!c){$(".ux-menu-close",this.menu).parent().hide()}else{$(".ux-menu-close",this.menu).parent().show()}var d=f.offset();this.menu.offset({top:d.top+15,left:d.left+f.width()/2})},hideMenu:function(){this.menu&&this.menu.hide()},setTabHeight:function(){var a=this.tab.height()-33;this.tab.content.height(a)},setTitle:function(b,c){var a=$("li:eq("+b+")",this.tab.header.ul);a.attr("title",c);$(".ux-tab-title",a).html(c)},addItems:function(){var f=this,a=f.options.items;var b;if(a){if(f.maxTabs&&a.length>f.maxTabs){throw new Error(String.format(f.initTooMuch,a.length,f.maxTabs))}for(var c=0;c<a.length;c++){var e=a[c];var d=f.initItem(e);f.doAddTitle(e);f.doAddContent(d,e);if(c==0||e.actived){b=e.id}}f.activeId=b;f.active(b)}},initItem:function(){var item=arguments[0],g=this;var defaultConf={closable:true,iframe:true,xtype:"Container"};EUI.applyIf(item,g.defaultConfig);EUI.applyIf(item,defaultConf);if(!item.id){item.id=EUI.getId("tabitem")}if(!item.iframe){var xtype=item.xtype?item.xtype:g.defaultType;if(!xtype){throw new Error(EUI.error.noXtype)}var fn=eval("EUI."+xtype);if(!fn){throw new Error(String.format(EUI.error.noCmp,xtype))}return fn}else{return null}},doAddTitle:function(k){var e=this;var f=k.title?k.title:"";delete k.title;var i=$("<li title='"+f+"'></li>").addClass(e.liCss).attr("tabid",k.id);i.bind("click",function(){e.active(k.id)});var h=$("<a></a>").addClass(e.aCss);if(k.iconCls){h.append("<span class='"+e.iconCss+" "+k.iconCls+"'></span>&nbsp;")}var c=$("<span class='ux-tab-title'>"+f+"</span>");h.append(c);i.append(h);if(k.closable){var j=$("<div class='"+e.itemCloseCss+"'></div>");j.bind("click",function(){e.close(k.id);return false});i.append(j)}e.tab.header.ul.append(i);if(e.tabWidth){c.width(e.tabWidth)}else{var d=c.width();if(d>e.maxWidth){c.width(e.maxWidth)}}delete k.iconCls;var b=e.tab.header.wrap;e.totalWidth+=(1+i.width());if(e.autoScroll&&!e.scrolled&&b.width()<e.totalWidth){e.tab.header.left.show();e.tab.header.right.show();e.tab.header.ul.animate({left:e.tab.header.left.width()},function(){e.tab.header.right.removeClass(e.disableRight)});e.scrolled=true}},doAddContent:function(){var e=this,j=arguments[1],b,h=arguments[0];var i=this.tab.content.height();var d=$("<div class='ux-tab-content-item'></div>");d.attr("tabid",j.id);e.tab.content.append(d);if(!j.iframe){var a=$("<div id='"+j.id+"'></div>");d.append(a);j.renderTo=j.id;var f=h.call(h,j);e.items.push(f.id)}else{if(!j.url){throw new Error(EUI.error.noUrl)}d.append("<div class='ux-tab-loading'></div>");var c=$('<iframe frameborder="0" width="100%" height="100%"></iframe>').attr("src",j.url);c.bind("load",function(){$(this).prev().hide()});c.data(e.iframeData);j.renderTo=j.id;c.attr("id",j.id);d.append(c)}d.hide()},addTab:function(e){var d=this;if(e.id){for(var a=0;a<d.options.items.length;a++){if(d.options.items[a].renderTo==e.id){if(e.cover==true){var c=$("#"+e.id).attr("src",e.url);c.prev().show()}d.active(e.id);return null}}}if(d.maxTabs&&d.options.items.length>=d.maxTabs){EUI.ProcessStatus({title:"提示",success:false,msg:String.format(d.overflowText,d.maxTabs)});return null}e.parentCmp=d.id||d.renderTo;var b=d.initItem(e);d.doAddTitle(e);d.doAddContent(b,e);d.options.items.push(e);d.active(e.id);return this},show:function(){var a=$("li",this.tab.header.ul).length;this.active(a-1)},active:function(f){var d=this,b=d.tab.header.ul;var a=$("."+d.liCss+"[tabid='"+f+"']",b);a.addClass(d.activeCss).siblings().removeClass(d.activeCss);var c=$(".ux-tab-content-item[tabid='"+f+"']",d.tab.content);c.show().siblings().hide();d.activeId=f;var e=null;if($("iframe#"+f).length!=0){e=$("iframe#"+f)[0].contentWindow}this.onActive&&this.onActive.call(this,f,e)},scrollVisible:function(f){var j=this,h,m,b,i;var k=j.tab.header.ul;if(j.scrolled){h=$("."+j.liCss+"[tabid='"+f+"']",k);var l=h.offset().left;var d=k.offset().left;m=j.tab.header.left.offset().left;b=j.tab.header.right.offset().left;var e=j.tab.header.left.is(":visible")?j.tab.header.left.width():0;if(l<m+e+2){i=m+e}else{if(l+h.width()>b){i=d-(h.width()+l+2-b)}}if(i!=undefined){j.tab.header.ul.offset({left:i})}var a=$("."+j.liCss+":first",k).offset().left;if(a-2>=m+e){j.tab.header.left.addClass(j.disableLeft)}else{j.tab.header.left.removeClass(j.disableLeft)}var n=$("."+j.liCss+":last",k);var c=n.offset().left;if(c+n.width()+2<=b){j.tab.header.right.addClass(j.disableRight)}else{j.tab.header.right.removeClass(j.disableRight)}}},onResize:function(){EUI.container.TabPanel.superclass.onResize.call(this);var c=this,a=c.tab.header.ul,b=c.tab.header.wrap.width()-36;c.setTabHeight();if(c.autoScroll&&b!=c.wrapWidth){if(c.totalWidth>b){if(!c.scrolled){c.tab.header.left.show();c.tab.header.right.show();c.scrolled=true}c.scrollVisible(c.activeId)}else{if(c.scrolled){c.tab.header.left.hide();c.tab.header.right.hide();a.offset({left:3});c.scrolled=false}}}c.wrapWidth=c.tab.header.wrap.width();c.tab.content.width(c.wrapWidth)},close:function(b){var f=this,k=f.tab.header.ul,m=f.options.items,h;for(var e=0;e<m.length;e++){if(m[e].renderTo==b){h=e;break}}var p=$("."+f.liCss+"[tabid='"+b+"']",k);if(p.length==0){return}var c=p.hasClass(f.activeCss);if(f.beforeClose){var l=f.beforeClose.call(this,b);if(l==false){return}}var o=p.width()+1;f.totalWidth-=o;p.remove();$(".ux-tab-content-item[tabid='"+b+"']",f.tab.content).remove();m.splice(h,1);var n=EUI.getCmp(b);if(n){var a=f.items;for(var d in a){if(a[d]==b){a.splice(d,1);break}}n.remove()}if(c){f.activeId=null;if(h<m.length){f.active(m[h].id)}else{if(h>0){f.active(m[h-1].id)}}}f.setScroll();if(f.afterClose){f.afterClose.call(this,b)}},closeOther:function(b){var d=this;var a=d.options.items;for(var c=0;c<a.length;c++){var e=a[c].id;if(e!=b&&a[c].closable){d.doClose(e,c);c--;if(d.activeId==e){d.activeId=null}}}if(!d.activeId&&a.length>0){d.active(a[0].id)}d.setScroll()},closeAll:function(){var c=this;var a=c.options.items;for(var b=0;b<a.length;b++){if(!a[b].closable){continue}var d=a[b].id;c.doClose(d,b);b--;if(c.activeId==d){c.activeId=null}}if(!c.activeId&&a.length>0){c.active(a[0].id)}c.setScroll()},doClose:function(b,e){var d=this,f=d.tab.header.ul,h=d.options.items;var l=$("."+d.liCss+"[tabid='"+b+"']",f);if(l.length==0){return}var m=$(".ux-tab-content-item[tabid='"+b+"']",d.tab.content);if(d.beforeClose){var i=d.beforeClose.call(this,b);if(i==false){return}}d.totalWidth-=l.width()+1;l.remove();m.remove();h.splice(e,1);var k=EUI.getCmp(b);if(k){var a=d.items;for(var c in a){if(a[c]==b){a.splice(c,1);break}}k.remove()}if(d.afterClose){d.afterClose.call(this,b)}},refresh:function(d,a){var c=this;var b=$("iframe#"+d,c.tab.content);a=a||b.attr("src");b.prev().show();b.attr("src",a)},setScroll:function(){var d=this;var i=d.tab.header,b=i.ul;if(d.scrolled){var c=i.wrap.width()-i.left.width()-i.right.width();if(c>=d.totalWidth){i.left.hide();i.right.hide();i.wrap.animate({left:0},function(){b.offset({left:i.offset().left+31})});d.scrolled=false}else{var e=$("."+d.liCss+":first",b);var h=e.offset().left;var f=i.left.offset().left;var a=i.left.width();if(h<=f+a+1){b.offset({left:f+a+3})}}}}});EUI.FormPanel=function(){return new EUI.container.FormPanel(arguments[0])};EUI.container.FormPanel=EUI.extend(EUI.container.Container,{url:null,store:null,afterLoad:null,layout:"form",formCss:"ux-form",initComponent:function(){EUI.container.FormPanel.superclass.initComponent.call(this);if(this.store){this.initStore()}},getType:function(){return"FormPanel"},submit:function(){if(this.isValid()){var a=arguments[0]||{};var b=this.getFormValue();EUI.applyIf(a,{params:b});EUI.applyIf(a,{url:this.url});a.autoLoad=true;EUI.Store(a)}},isValid:function(){return this.doValidate(this.items)},doValidate:function(){var b=arguments[0];var a=true;if(b){for(var d=0;d<b.length;d++){var e=EUI.getCmp(b[d]);if(e.isFormField||e.needValid){var c=e.sysValidater();a=a&&c}else{if(e.items){a=this.doValidate(e.items)&&a}}}}return a},getFormValue:function(){var a=this.items;var d={};for(var b=0;b<a.length;b++){var c=EUI.getCmp(a[b]);EUI.applyIf(d,this.getItemValue(c))}return d},getItemValue:function(){var b=arguments[0];var c={};if(b.isFormField){EUI.applyIf(c,b.getSubmitValue())}if(b.items){for(var a=0;a<b.items.length;a++){EUI.applyIf(c,this.getItemValue(EUI.getCmp(b.items[a])))}}return c},reset:function(){this.doReset(this.items)},doReset:function(){var a=arguments[0];if(a){for(var b=0;b<a.length;b++){var c=EUI.getCmp(a[b]);if(c.isFormField){c.reset()}this.doReset(c.items)}}},loadData:function(){if(arguments[0]){this.data=arguments[0]}this.doLoadData(this.items);this.isValid()},doLoadData:function(){var a=arguments[0];if(a){for(var b=0;b<a.length;b++){var c=EUI.getCmp(a[b]);if(c.isFormField){c.loadData(this.data)}this.doLoadData(c.items)}}},initStore:function(){var b=this;b.store.success=function(c){b.data=c.data;b.loadData();b.afterLoad&&b.afterLoad.call(this,b.data)};b.store.autoLoad=true;b.beforeLoad&&b.beforeLoad.call(this,b);var a=EUI.Store(b.store);b.store=a},getCmpByName:function(){var b=arguments[0];var a=this.items;return this.doGetCmp(a,b)},doGetCmp:function(){var a=arguments[0],b=arguments[1];if(a){for(var c=0;c<a.length;c++){var e=EUI.getCmp(a[c]);if(e.isFormField&&e.name==b){return e}else{var d=this.doGetCmp(e.items,b);if(d!=null){return d}}}}return null}});EUI.TreePanel=function(){return new EUI.container.TreePanel(arguments[0])};EUI.container.TreePanel=EUI.extend(EUI.container.Container,{url:null,params:null,data:null,showField:"name",beforeLoad:null,afterLoad:null,showIcon:null,index:1,originData:null,searchField:["name"],async:false,onSelect:null,itemRender:null,afterItemRender:null,getAsyncUrl:null,initComponent:function(){EUI.container.TreePanel.superclass.initComponent.call(this);if(this.data&&this.data.length>0){this.originData=this.data}},getType:function(){return"TreePanel"},render:function(){this.treebox=$("<div class='ux-tree-box'></div>");this.dom.append(this.treebox);if(this.url){this.loadData()}else{if(this.data){this.initTree()}}this.addEvents();EUI.container.TreePanel.superclass.render.call(this)},loadData:function(d){var c=this;EUI.applyIf(this.params,d);if(this.beforeLoad){var a=this.beforeLoad.call(this);if(!a){return false}}var b=EUI.LoadMask();EUI.Store({url:this.url,params:this.params,success:function(e){b.hide();if(e.success){c.data=e.data;c.originData=e.data;c.initTree()}else{EUI.ProcessStatus(e)}},failure:function(e){EUI.ProcessStatus(e);b.hide()}})},initTree:function(){this.treebox.html("");var a=this.doInitTree(this.data,"",0);this.treebox.append(a);if(this.afterItemRender){this.renderItem(this.data)}},doInitTree:function(g,c,b){var k="";if(c){c+="-"}for(var h=0;h<g.length;h++){var r=g[h];var d=r.id||++this.id;var n=c+h;var f="<li id='"+d+"' dx='"+n+"'>";var p,j;if(r.hasChild||(r.children&&r.children.length>0)){p="ux-expandable-close";if(r.isexpand){p="ux-expandable-open";j="ux-tree-folder-open"}else{j="ux-tree-folder-close"}}else{p="ux-expandable-hide";j="ux-tree-leaf"}if(this.showIcon){var a=this.showIcon.call(this,r);if(a){j=a}}var q=r[this.showField];if(this.itemRender){q=this.itemRender.call(this,r)}var e=b*20;var m="<div class='ux-body' style='padding-left:"+e+"px;'><div class='ux-icon-box'><div class='ux-tree-icon expandable "+p+"'></div></div><div class='ux-tree-icon "+j+"'></div><div class='ux-tree-title'>"+q+"</div></div>";f+=m;if(r.children){var o="<ul class='ux-tree-children'>";if(!r.isexpand){o="<ul class='ux-tree-children' style='display:none;'>"}var l=this.doInitTree(r.children,n,b+1);o+=l+"</ul>";f+=o}k+=f+"</li>"}return k},renderItem:function(b){for(var a=0;a<b.length;a++){this.afterItemRender.call(this,b[a]);if(b[a].children){this.renderItem(b[a].children)}}},expandAll:function(){$("ul",this.treebox).show()},closeAll:function(){$("ul",this.treebox).hide()},expand:function(g){var f=$("li[id='"+g+"']",this.treebox);var e=this.getNodeData(g);if(this.async&&e.hasChild&&!e.children){this.getExtraData(e,f)}var d=f.parents("ul");for(var c=0;c<d.length;c++){var b=$(d[c]);var a=b.prev().find(".expandable");this.expandOpt(a)}f.find(".ux-icon-box").click();f.addClass("ux-tree-selected")},getExtraData:function(c,d){var b=this;var a;if(b.getAsyncUrl){a=b.getAsyncUrl.call(this,c)}if(!a){EUI.ProcessStatus({success:false,msg:"获取数据地址不能为空"});return}EUI.Store({url:a,success:function(e){if(e.success){b.doInitTree(c,d)}else{EUI.ProcessStatus(e)}},failure:function(e){EUI.ProcessStatus(e)}})},close:function(b){var a=$("li[id='"+b+"']",this.treebox);a.find(".ux-icon-box").click()},addEvents:function(){var a=this;$(".ux-icon-box",this.dom).live("click",function(){var b=$(this).find(".expandable");if(b.hasClass("ux-expandable-close")){var d=$(this).parent().parent();var e=d.attr("id");var c=a.getNodeData(e);if(a.async&&c.hasChild&&!c.children){a.getExtraData(c,d)}a.expandOpt(b)}else{a.closeOpt(b)}return false});$(".ux-body",this.dom).live("click",function(){$(".selected",a.dom).removeClass("selected");$(this).addClass("selected");var c=$(this).parent().attr("id");var b=a.getNodeData(c);a.onSelect&&a.onSelect.call(a,b)})},expandOpt:function(a){a.removeClass("ux-expandable-close");a.parent().next().removeClass("ux-tree-folder-close").addClass("ux-tree-folder-open");a.parent().parent().next().show("normal")},closeOpt:function(a){a.addClass("ux-expandable-close");a.parent().next().addClass("ux-tree-folder-close").removeClass("ux-expandable-open");a.parent().parent().next().hide("normal")},setData:function(a,b){if(a instanceof Array){if(b){this.originData=a}this.data=a;this.initTree()}},deleteItem:function(a){$("li[id='"+a+"']",this.dom).hide("fast",function(){$(this).remove()})},setSelect:function(c){var b=$("#"+c+" .ux-body:first",this.dom);if(b.length==0){return}if(!b.hasClass("selected")){$(".selected",this.dom).removeClass("selected");b.addClass("selected")}var a=this.getNodeData(c);this.expand(c);this.onSelect&&this.onSelect.call(this,a)},clearSelect:function(){$(".selected",this.dom).removeClass("selected")},getParentData:function(c){var b=$("#"+c,this.dom);if(b.length==0){return null}var a=b.attr("dx");a=a.substring(0,a.lastIndexOf("-"));return this.getDataByLv(a)},getNodeData:function(c){var b=$("#"+c,this.dom);if(b.length==0){return null}var a=b.attr("dx");return this.getDataByLv(a)},getDataByLv:function(a){var e=this.data;var d=a.split("-");for(var c=0;c<d.length;c++){var b=parseInt(d[c]);if(c==d.length-1){return e[b]}else{e=e[b].children}}return e},search:function(c){var b=JSON.parse(JSON.stringify(this.originData));c=c.toLowerCase();var a=this.doSearch(c,b);this.setData(a)},checkIsExist:function(e,d){for(var c=0;c<this.searchField.length;c++){var b=this.searchField[c];var a=d[b].toLowerCase();if(a.indexOf(e)!=-1){return true}}},doSearch:function(c,b){var e=[];for(var a=0;a<b.length;a++){if(b[a].children&&b[a].children.length>0){var d=this.doSearch(c,b[a].children);if(d.length==0){if(this.checkIsExist(c,b[a])){delete b[a].children;b[a].hasChild=true;e.push(b[a])}}else{b[a].children=d;e.push(b[a])}}else{if(this.checkIsExist(c,b[a])){e.push(b[a])}}}return e},reset:function(){this.setData(this.originData)},remove:function(){EUI.container.TreePanel.superclass.remove.call(this);$(".ux-icon-box",this.dom).die("click");$(".ux-body",this.dom).die("click")}});EUI.Window=function(){return new EUI.container.Window(arguments[0])};EUI.container.Window=EUI.extend(EUI.container.Container,{width:340,height:400,padding:10,showTitle:true,showClose:true,isOverFlow:true,closeAction:"close",afterClose:null,initComponent:function(){EUI.container.Window.superclass.initComponent.call(this)},getType:function(){return"Window"},initDom:function(){this.dom=$("<div class='ux-window'><div class='ux-window-titlebar'><span class='ux-window-title'>"+(this.title||"")+"</span><span class='ux-window-close'></span></div><div class='ux-window-content'><div id='"+this.id+"'></div><div class='ux-window-optbox'></div></div></div>");$("body").append(this.dom);this.dom.title=$(".ux-window-titlebar",this.dom);if(!this.title){this.dom.title.hide()}this.setShadow();this.shadow.css("z-index",++EUI.zindex);this.dom.css("z-index",++EUI.zindex)},render:function(){this.dom.content=$("#"+this.id);if(this.padding){this.dom.content.css({padding:this.padding})}if(!this.isOverFlow){this.dom.content.css("overflow","hidden")}else{this.dom.content.css("overflow","auto")}this.setWidth(this.width);this.setHeight(this.height);this.setPosition();this.initButtons();this.addEvents()},setTitle:function(a){if(a){this.dom.title.show()}$(".ux-window-title",this.dom.title).text(a)},setWidth:function(a){this.dom.content.width(a);this.width=a},setHeight:function(a){this.dom.content.height(a);this.height=a},setShadow:function(){this.shadow=$("<div class='ux-shadow'></div>");$("body").append(this.shadow)},setPosition:function(){var a=$(window).height();var b=$(window).width();var d=(b-this.dom.width())/2;var c=(a-this.dom.height())/2;d=d<0?0:d;c=c<0?0:c;if(c>100){c-=50}this.dom.css({top:c,left:d});this.shadow.css({height:a+"px"})},initButtons:function(){var a=$(".ux-window-optbox",this.dom);if(this.buttons){for(var c=0;c<this.buttons.length;c++){var d=this.buttons[c].id||EUI.getId("Button");var b="<div id='"+d+"'></div>";a.append(b);EUI.applyIf(this.buttons[c],{xtype:"Button",renderTo:d});EUI.Button(this.buttons[c])}}else{a.hide()}},addEvents:function(){var a=this;if(!this.showClose){$(".ux-window-close",this.dom).hide()}else{$(".ux-window-close",this.dom).bind("click",function(){if(a.closeAction=="close"){a.close()}else{a.hide()}})}$(".ux-window-titlebar",this.dom).bind({mousedown:function(b){$(this).css("cursor","move");var c=b||window.event;$(this).data("draggable",true);$(this).data("dragData",{startX:c.pageX,startY:c.pageY})},mousemove:function(d){var f=$(this).data("dragData");if(!$(this).data("draggable")){return}var g=d||window.event;var b=a.dom.position();var c={left:b.left+(g.pageX-f.startX),top:b.top+(g.pageY-f.startY)};a.dom.css(c);$(this).data("dragData",{startX:g.pageX,startY:g.pageY})},mouseup:function(){$(this).css("cursor","");$(this).data("draggable",false)},mouseleave:function(){$(this).css("cursor","");$(this).data("draggable",false)}})},onResize:function(){this.setPosition()},getDom:function(){return this.dom.content},hide:function(){this.dom.hide();this.shadow.hide()},show:function(){this.dom.show();this.shadow.show()},close:function(){this.remove();this.afterClose&&this.afterClose.call(this)},remove:function(){this.shadow.remove();EUI.container.Window.superclass.remove.call(this)}});EUI.ToolBar=function(a){return new EUI.container.ToolBar(a)};EUI.container.ToolBar=EUI.extend(EUI.container.Container,{padding:5,height:40,border:false,isOverFlow:false,domCss:"ux-toolbar",itemCss:"ux-toolbar-item",initComponent:function(){EUI.container.ToolBar.superclass.initComponent.call(this)},getType:function(){return"ToolBar"},addItems:function(){var g=this,items=this.options.items;if(items){var tb=g.dom;for(var i=0;i<items.length;i++){var item=items[i];if(item=="->"){g.dom.rightbox=$('<div class="ux-bar-right"></div>');g.dom.append(g.dom.rightbox);tb=g.dom.rightbox;continue}var div;if(i==items.length-1){div=$("<div class='"+this.itemCss+"' style='margin-right:0px;'></div>")}else{div=$("<div class='"+this.itemCss+"'></div>")}if(!item.renderTo){var id=item.id||EUI.getId(item.xtype);if(items.length>1){div.append("<div id='"+id+"'>")}else{div.attr("id",id)}item.renderTo=id}tb.append(div);EUI.applyIf(item,g.defaultConfig);var xtype=item.xtype;if(!xtype){throw new Error(EUI.error.noXtype)}var cmp=eval("EUI."+xtype);if(!cmp){throw new Error(String.format(EUI.error.noCmp,xtype))}cmp=cmp.call(cmp,item);this.items.push(cmp.id)}}},onResize:function(){EUI.container.ToolBar.superclass.onResize.call(this)}});EUI.FormLayout=function(){return new EUI.layout.FormLayout(arguments[0],arguments[1])};EUI.layout.FormLayout=function(){this.scope=arguments[0];var a=arguments[1];if(a=="layout"){this.layout()}else{if(a=="resize"){this.resize()}}};EUI.apply(EUI.layout.FormLayout.prototype,{itemspace:8,rowCss:"ux-line-row",layout:function(){var items=this.scope.options.items,scope=this.scope;var dom=scope.getDom();var itemspace=scope.itemspace==undefined?this.itemspace:scope.itemspace;var rowCss=scope.rowCss||this.rowCss;var parentWidth=dom.outerWidth();parentWidth-=parseFloat(dom.css("marginLeft"))||0;parentWidth-=parseFloat(dom.css("marginRight"))||0;var flag=false;for(var i=0;i<items.length;i++){var item=items[i];EUI.applyIf(item,scope.defaultConfig);if(!item.xtype){throw new Error(EUI.error.noXtype)}var cmpFn=eval("EUI."+item.xtype);if(!cmpFn){throw new Error(EUI.error.noXtype+":EUI."+item.xtype)}var div=$("<div class='"+rowCss+"'></div>");if(!item.hidden){if(flag){div.css("margin-top",itemspace)}else{flag=true}}if(!item.renderTo){var id=item.id||EUI.getId(item.xtype);if(items.length>1){div.append("<div id='"+id+"'>")}else{div.attr("id",id)}item.renderTo=id}dom.append(div);item.changeVisiable=function(visiable){var lineRow=this.dom.parent();if(visiable){lineRow.css("margin-top",itemspace)}else{lineRow.css("margin-top",0)}};item=cmpFn.call(cmpFn,item);scope.items.push(item.id)}if(dom[0].clientWidth!=dom[0].offsetWidth){EUI.resize(scope)}},resize:function(){var b=this.scope.items;var g=this.scope.getDom();var d=g.outerWidth();d-=parseFloat(g.css("marginLeft"))||0;d-=parseFloat(g.css("marginRight"))||0;var a=g[0].scrollWidth>g[0].offsetWidth;if(a&&this.scope.isOverFlow){for(var c=0;c<b.length;c++){var e=EUI.getCmp(b[c]);var f=e.dom.parent();f.width(d-17)}}}});EUI.ColumnLayout=function(){return new EUI.layout.ColumnLayout(arguments[0],arguments[1])};EUI.layout.ColumnLayout=function(){this.scope=arguments[0];var a=arguments[1];if(a=="layout"){this.layout()}else{if(a=="resize"){this.resize()}}};EUI.apply(EUI.layout.ColumnLayout.prototype,{itemspace:20,columnCss:"ux-column-layout",layout:function(){var items=this.scope.options.items,g=this,scope=this.scope;var dom=scope.getDom();var itemspace=scope.itemspace==undefined?this.itemspace:scope.itemspace;var columnCss=scope.columnCss||this.columnCss;var firstRight;var overFlag=false;for(var i=0;i<items.length;i++){var item=items[i],id;EUI.applyIf(item,scope.defaultConfig);var xtype=item.xtype;if(!xtype){throw new Error(EUI.error.noXtype)}var cmpFn=eval("EUI."+xtype);if(!cmpFn){throw new Error(EUI.error.noXtype+":EUI."+xtype)}var div=$("<div class='"+columnCss+"'></div>");if(i!=0){div.css("margin-left",itemspace)}if(!item.renderTo){id=item.id||EUI.getId(item.xtype);if(items.length>1){div.append("<div id='"+id+"'>")}else{div.attr("id",id)}item.renderTo=id}dom.append(div);item=cmpFn.call(cmpFn,item);scope.items.push(item.id);if(i==0){firstRight=item.dom.offset().left+item.dom.width()}else{var left=div.offset().left;if(left<firstRight){overFlag=true;firstRight=div.offset().left+div.width();div.css("margin-left",0)}if(overFlag){div.css("margin-top",8)}}}},resize:function(){var g=this.scope.items;var j=this.scope.itemspace||this.itemspace;var h=EUI.getCmp(g[0]).dom;var e=h.offset().left+h.width();var b=false;for(var f=1;f<g.length;f++){var d=EUI.getCmp(g[f]).dom;var c=d.offset().left;var a=d.parent();if(c<e){b=true;e=a.offset().left+a.width();a.css("margin-left",0)}else{a.css("margin-left",j)}if(b){a.css("margin-top",8)}else{a.css("margin-top",0)}}}});EUI.BorderLayout=function(){return new EUI.layout.BorderLayout(arguments[0],arguments[1])};EUI.layout.BorderLayout=function(){this.scope=arguments[0];var a=arguments[1];if(a=="layout"){this.layout()}else{if(a=="resize"){this.resize()}}};EUI.apply(EUI.layout.BorderLayout.prototype,{itemspace:4,layout:function(){var items=this.scope.options.items,scope=this.scope;var east,south,west,north,center;var itemspace=scope.itemspace==undefined?this.itemspace:scope.itemspace;var dom=this.scope.getDom();var parentWidth=dom.width();var parentHeight=dom.height();var centerWidth=parentWidth;var centerHeight=parentHeight;for(var i=0;i<items.length;i++){var item=items[i];EUI.applyIf(item,scope.defaultConfig);EUI.applyIf(item,{border:true,xtype:"Container"});if(item.region=="east"){if(!item.width){item.width="20%";item.defaultWidth="20%"}east=item;if(typeof east.width=="string"&&east.width.indexOf("%")>-1){width=parseFloat(east.width)/100;east.width=parseInt(parentWidth*width)}centerWidth-=(east.width+itemspace)}else{if(item.region=="west"){if(!item.width){item.width="20%";item.defaultWidth="20%"}west=item;if(typeof west.width=="string"&&west.width.indexOf("%")>-1){width=parseFloat(west.width)/100;west.width=parseInt(parentWidth*width)}centerWidth-=(west.width+itemspace)}else{if(item.region=="south"){if(!item.height){item.height="15%";item.defaultHeight="15%"}south=item;if(typeof south.height=="string"&&south.height.indexOf("%")>-1){height=parseFloat(south.height)/100;south.height=parseInt(parentHeight*height);south.defaultHeight="15%"}centerHeight-=(south.height+itemspace)}else{if(item.region=="north"){if(!item.height){item.height="15%";item.defaultHeight="15%"}north=item;if(typeof north.height=="string"&&north.height.indexOf("%")>-1){height=parseFloat(north.height)/100;north.height=parseInt(parentHeight*height)}centerHeight-=(north.height+itemspace)}else{if(item.region=="center"){center=item}}}}}}if(!center){throw new Error(String.format(EUI.error.noCenter,scope.id))}else{center.width=centerWidth;center.height=centerHeight;var height,width,panel,top,left;var div,id,xtype,cmp;if(north){xtype=north.xtype;id=north.id||EUI.getId(xtype);div=$("<div id='"+id+"'></div>");dom.append(div);div.css({position:"absolute"});north.renderTo=id;cmp=eval("EUI."+xtype);if(!cmp){throw new Error(String.format(EUI.error.noCmp,xtype))}panel=cmp.call(cmp,north);scope.items.push(panel.id);this.scope.north=panel.id;top=panel.height+panel.dom.offset().top+itemspace}if(west){west.height=center.height;xtype=west.xtype;cmp=eval("EUI."+xtype);if(!cmp){throw new Error(String.format(EUI.error.noCmp,xtype))}id=west.id||EUI.getId(xtype);div=$("<div id='"+id+"'></div>");dom.append(div);div.css({position:"absolute"});if(north){div.offset({top:top})}west.renderTo=id;panel=cmp.call(cmp,west);scope.items.push(panel.id);this.scope.west=panel.id;left=panel.width+panel.dom.offset().left+itemspace}if(center){xtype=center.xtype;cmp=eval("EUI."+xtype);if(!cmp){throw new Error(String.format(EUI.error.noCmp,xtype))}id=center.id||EUI.getId(xtype);div=$("<div id='"+id+"'></div>");dom.append(div);div.css({position:"absolute"});if(north){div.offset({top:top})}if(west){div.offset({left:left})}center.renderTo=id;panel=cmp.call(cmp,center);scope.items.push(panel.id);this.scope.center=panel.id;left=panel.width+panel.dom.offset().left+itemspace}if(east){east.height=center.height;xtype=east.xtype;cmp=eval("EUI."+xtype);if(!cmp){throw new Error(String.format(EUI.error.noCmp,xtype))}id=east.id||EUI.getId(xtype);div=$("<div id='"+id+"'></div>");dom.append(div);div.css({position:"absolute"});if(north){div.offset({top:top})}div.offset({left:left});east.renderTo=id;panel=cmp.call(cmp,east);scope.items.push(panel.id);this.scope.east=panel.id}top=EUI.getCmp(this.scope.center).dom.offset().top+EUI.getCmp(this.scope.center).height+itemspace;if(south){south.height=south.height;xtype=south.xtype?south.xtype:scope.defaultType;EUI.applyIf(south,this.defaultStyle);cmp=eval("EUI."+xtype);if(!cmp){throw new Error(String.format(EUI.error.noCmp,xtype))}id=south.id||EUI.getId(xtype);div=$("<div id='"+id+"'></div>");dom.append(div);div.css({position:"absolute"});div.offset({top:top});south.renderTo=id;panel=cmp.call(cmp,south);scope.items.push(panel.id);this.scope.south=panel.id}}},resize:function(){var e=this.scope.getDom();var h=e.width();var f=e.height();var j=h;var d=f;var k=this.scope.itemspace==undefined?this.itemspace:this.scope.itemspace;var i,b,a,g=0,c=0;if(this.scope.north){a=EUI.getCmp(this.scope.north);i=a.height;if(a.options.defaultHeight){i=parseFloat(a.options.defaultHeight)/100;i=parseInt(f*i);a.setHeight(i);a.setWidth(h)}d-=(a.dom.outerHeight()+k);a.dom.css({position:"absolute"});g=a.dom.outerHeight()+a.dom.offset().top+k;EUI.resize(a)}if(this.scope.south){a=EUI.getCmp(this.scope.south);i=a.height;if(a.options.defaultHeight){i=parseFloat(a.options.defaultHeight)/100;i=parseInt(f*i);a.setHeight(i);a.setWidth(h)}d-=(a.dom.outerHeight()+k);EUI.resize(a)}if(this.scope.west){a=EUI.getCmp(this.scope.west);b=a.width;a.setHeight(d);if(a.options.defaultWidth){b=parseFloat(a.options.defaultWidth)/100;b=parseInt(h*b);a.setWidth(b)}if(this.scope.north){a.dom.offset({top:g})}c=a.width+a.dom.offset().left+k;j-=(b+k);EUI.resize(a)}if(this.scope.east){a=EUI.getCmp(this.scope.east);b=a.width;a.setHeight(d);if(a.options.defaultWidth){b=parseFloat(a.options.defaultWidth)/100;b=parseInt(h*b);a.setWidth(b)}j-=(b+k);EUI.resize(a)}if(this.scope.center){a=EUI.getCmp(this.scope.center);a.setHeight(d);a.setWidth(j);if(this.scope.west){a.dom.offset({left:c})}if(this.scope.north){a.dom.offset({top:g})}c=a.width+a.dom.offset().left+k;if(this.scope.east){EUI.getCmp(this.scope.east).dom.offset({left:c});if(this.scope.north){EUI.getCmp(this.scope.east).dom.offset({top:g})}}g+=EUI.getCmp(this.scope.center).dom.outerHeight()+k;EUI.resize(a)}if(this.scope.south){EUI.getCmp(this.scope.south).dom.offset({top:g})}}});EUI.AutoLayout=function(){return new EUI.layout.AutoLayout(arguments[0],arguments[1])};EUI.layout.AutoLayout=function(){this.scope=arguments[0];var a=arguments[1];if(a=="layout"){this.layout()}else{if(a=="resize"){this.resize()}}};EUI.apply(EUI.layout.AutoLayout.prototype,{itemspace:10,floatCss:"ux-layout-auto",layout:function(){var items=this.scope.options.items,g=this,scope=this.scope;var dom=scope.getDom();var itemspace=scope.itemspace==undefined?this.itemspace:scope.itemspace;for(var i=0;i<items.length;i++){var item=items[i];var config={parentCmp:scope.id||scope.renderTo,isDefined:true};EUI.applyIf(item,config);EUI.applyIf(item,scope.defaultConfig);EUI.applyIf(item,scope.defaultStyle);if(!item.renderTo){var id=item.id||EUI.getId(item.xtype);var div=$("<div id='"+id+"' style='float:left;margin-left:"+itemspace+"px'>");if(i==0){div.css("margin-left","0")}dom.append(div);item.renderTo=id}if(!item.xtype){throw new Error(EUI.error.noXtype)}var cmpFn=eval("EUI."+item.xtype);if(!cmpFn){throw new Error(EUI.error.noXtype+":EUI."+item.xtype)}item=cmpFn.call(cmpFn,item);scope.items.push(item.id)}},resize:function(){}});EUI.form.Field=EUI.extend(EUI.UIComponent,{inputType:"text",textType:"input",readonly:false,name:null,field:null,submitValue:null,isFormField:true,title:null,value:null,colon:true,labelFirst:true,invalidText:null,domCss:"ux-field",readonlyCss:"ux-field-readonly",disabledCss:"ux-field-disable",labelCss:"ux-field-label",elementCss:"ux-field-element",requiredCss:"ux-field-must",labelStyle:null,initComponent:function(){EUI.form.Field.superclass.initComponent.call(this);if(!this.labelFirst){this.labelCss="ux-field-label-right"}},getType:function(){return"Field"},render:function(){var a=this;a.dom.addClass(a.domCss);a.initLabel();a.initField();a.addCss();a.initAttribute();a.addEvents();if(a.value!=null&&a.value!=""&&a.value!=undefined){if(!(typeof a.value=="object")){a.setValue(a.value)}else{a.loadData(a.value)}}else{a.initSubmitValue()}},show:function(){EUI.form.Field.superclass.show.call(this);this.hidden=false},hide:function(){EUI.form.Field.superclass.hide.call(this);this.hidden=true},initLabel:function(){var c=this;if(c.title){var d=c.title;if(c.colon){d=c.title+"："}var a=!c.labelFirst?c.title:d;var b=$("<label>"+a+"</label>");b.addClass(c.labelCss);if(this.labelStyle){b.css(this.labelStyle)}c.dom.label=b;c.dom.append(b);c.setLabelWidth(c.labelWidth?c.labelWidth:70)}},setTitle:function(){var b=this,d=arguments;if(d.length>0){b.title=d[0];var c=b.title;if(b.colon){c=b.title+"："}var a=!b.labelFirst?b.title:c;b.dom.label.html(a)}},setLabelWidth:function(){var a=parseInt(arguments[0]);if(this.dom.label&&a){this.dom.label.width(a)}},initField:function(){var b=this;var a;if(b.textType=="input"){a=$("<input type='"+b.inputType+"' autocomplete='off'  autocorrect='off' autocapitalize='off' spellcheck='false'>")}else{if(b.textType=="textarea"){a=$("<textarea></textarea>")}}a.addClass(b.fieldCss);b.dom.field=a;b.dom.fieldwrap=$("<div></div>").addClass(b.elementCss);b.dom.fieldwrap.append(b.dom.field);if(b.labelFirst){b.dom.append(b.dom.fieldwrap)}else{b.dom.fieldwrap.insertBefore(b.dom.label)}b.dom.append('<div class="ux-clear"></div>')},addCss:function(){var a=this;if(a.readonly){a.dom.field.attr("readonly",a.readonly);a.dom.fieldwrap.addClass(a.readonlyCss)}},initAttribute:function(){var a=this;if(a.readonly){a.dom.fieldwrap.addClass(a.readonlyCss)}if(a.disabled){a.dom.field.attr("disabled",a.disabled)}if(a.name){a.dom.field.attr("name",a.name)}if(a.submitValue){a.dom.field.data("submitValue",a.submitValue)}a.dom.field.attr("name",a.name)},addEvents:function(){var b=this;b.dom.field.bind("click",function(){if(!b.dom.fieldwrap.hasClass(b.focusCss)){b.dom.fieldwrap.addClass(b.focusCss)}});if(this.handler){b.dom.field.bind("click",this.handler)}var c=this.listener;if(c){for(var a in c){b.dom.field.bind(a,c[a])}}},sysValidater:function(){},keyup:function(){this.sysValidater()},getValue:function(){var a=this.dom.field.val();if(a){a=a.trim()}return a},initSubmitValue:function(){var c=this,d={};if(c.field){for(var b=0;b<c.field.length;b++){var a=c.field[b];d[a]=""}}c.submitValue=d},getSubmitValue:function(){var a={};if(this.name){a[this.name]=this.getValue()}EUI.applyIf(a,this.submitValue);return a},setSubmitValue:function(f){var c=this,e={};if(!f){return}this.setValue(f[this.name]);if(c.field){for(var b=0;b<c.field.length;b++){var a=c.field[b];var d=c.getJsonData(f,a);e[a]=(d!=undefined&&d!=null?d:"")}}c.submitValue=e},getJsonData:function(e,b){var d;if(e[b]){return e[b]}if(b.indexOf(".")!=-1){var c=b.split(".");var a=c[0];var f=c[1];if(!e[a]){return""}d=e[a][f]}else{d=e[b]}return d},loadData:function(){var a=arguments[0];this.setSubmitValue(a);if(a){this.setValue(this.getJsonData(a,this.name))}},setReadOnly:function(){var b=arguments;if(b.length!=0){var a=b[0]=="true"||b[0]==true?true:false;this.dom.field.attr("readonly",a);this.readonly=a;if(a){if(!this.dom.fieldwrap.hasClass(this.readonlyCss)){this.dom.fieldwrap.addClass(this.readonlyCss)}}else{this.dom.fieldwrap.removeClass(this.readonlyCss)}}},setWidth:function(){this.dom.field.width(arguments[0])},setValue:function(a){if(a&&typeof a=="string"){a=a.trim()}this.dom.field.val(a)},reset:function(){this.dom.field.val("");this.initSubmitValue()}});EUI.TextField=function(){return new EUI.form.TextField(arguments[0])};EUI.form.TextField=EUI.extend(EUI.form.Field,{inputType:"text",width:160,height:18,minlength:0,canClear:false,maxlength:Number.MAX_VALUE,allowChar:null,allowBlank:true,validater:null,validateText:null,displayText:null,hintText:null,unit:null,hintPrefixText:null,hintCss:"ux-field-hint",displayCss:"ux-field-display",fieldCss:"ux-field-text",focusCss:"ux-field-focus",invalidCss:"ux-field-invalid",unitCss:"ux-unitfield-unit",clearCss:"ux-tab-item-close",triggerBoxCss:"ux-trigger-box",checkInitValue:true,afterValidate:null,afterClear:null,initComponent:function(){EUI.form.TextField.superclass.initComponent.call(this)},getType:function(){return"TextField"},initField:function(){EUI.form.TextField.superclass.initField.call(this);if(this.hintText){var a=$("<div class='"+this.hintCss+"'>"+this.hintText+"</div>");$(".ux-clear",this.dom).before(a);this.dom.hintDom=a}if(this.unit){this.initUnit()}if(this.canClear){this.initClear()}this.setWidth(this.width);this.setHeight(this.height);this.initDisplayText()},initUnit:function(){var b=this;var a=$("<span class='"+this.unitCss+"'>"+this.unit+"</span>");b.dom.field.after(a)},initClear:function(){var b=this;var a=$("<div class='"+this.triggerBoxCss+"'><span class='"+this.clearCss+"'></span></div>");if(b.canClear){b.dom.field.after(a);b.clearBtn=a}if(b.readonly){a.hide()}},initLabel:function(){var c=this;if(c.title){var d="<span style='float:left;'>"+c.title+"</span>";if(c.colon){d="<span style='float:left;'>"+c.title+"：</span>"}var a=!c.allowBlank?d+"<span class='"+c.requiredCss+"'>*</span>":d;var b=$("<label>"+a+"</label>");b.addClass(c.labelCss);if(this.labelStyle){b.css(this.labelStyle)}c.dom.label=b;c.dom.append(b);c.setLabelWidth(c.labelWidth?c.labelWidth:70)}},setAllowBlank:function(a){var b=this;if(typeof a!="boolean"){return}if(!b.title){b.allowBlank=a;return}if(a===false){if(b.dom.label.find("span."+b.requiredCss).length>0){return}b.dom.label.append("<span class='"+b.requiredCss+"'>*</span>");b.allowBlank=false}else{b.dom.label.find("span."+b.requiredCss).remove();b.allowBlank=true}},setWidth:function(){var a=parseInt(arguments[0]);if(a){if(typeof arguments[0]=="string"&&arguments[0].indexOf("%")>-1){a/=100;a*=this.dom.parent().width();if(this.dom.label){if(!this.labelWidth){if(a*7/23<40){this.setLabelWidth(40);a-=40}if(a*7/23>70){this.setLabelWidth(70);a-=70}else{this.setLabelWidth(a*7/23);a-=(a*7/23)}}else{this.setLabelWidth(this.labelWidth);a-=this.labelWidth}}a-=10}this.dom.field.width(a);this.width=arguments[0]}},setHeight:function(){var a=parseInt(arguments[0]);if(a){this.dom.field.height(a)}},initDisplayText:function(){var a=this;if(a.displayText){a.dom.field.val(a.displayText);a.dom.field.addClass(a.displayCss)}},addEvents:function(){var b=this;var a=b.dom.fieldwrap;var c=b.dom.field;c.bind("keypress",function(g){var f=g.keyCode||g.charCode;if(f==37||f==39||f==8||(g.ctrlKey&&f>0)){if(g.ctrlKey&&(f==118||f==86)){b.sysValidater()}return true}else{var d=String.fromCharCode(f);if(b.allowChar&&b.allowChar.indexOf(d)==-1){return false}}});c.bind("click",function(){if(b.hintText){b.dom.hintDom.css("display","inline-block")}});c.bind("blur",function(){if(b.hintText){b.dom.hintDom.hide()}if(!b.getValue()){b.submitValue=null}b.sysValidater();a.removeClass(b.focusCss)});c.bind("keyup",function(d){if(!b.getValue()){b.afterClear&&b.afterClear.call(b)}});c.hover(function(){if(b.tooltip&&b.invalidText){b.showTip().show()}},function(){b.hideTip()});if(b.displayText){b.doDisplayEvents()}else{b.doBlankEvents()}b.clearBtn&&b.clearBtn.bind("click",function(){b.reset();b.afterClear&&b.afterClear.call(b)});EUI.form.TextField.superclass.addEvents.call(this)},doDisplayEvents:function(){var a=this;a.dom.field.bind("blur",function(){var b=a.dom.field.val();if(!b){a.dom.field.addClass(a.displayCss);a.dom.field.val(a.displayText)}});a.dom.field.bind("focus",function(){if(!a.readonly){var b=a.dom.field.val();if(a.displayText==b){a.dom.field.val("")}a.dom.field.removeClass(a.displayCss);a.sysValidater()}})},doBlankEvents:function(){var a=this;a.dom.field.bind("keyup",function(){a.sysValidater()})},sysValidater:function(){var b=this;if(b.hidden){return true}var d=b.getValue();if(b.validater){if(b.validater(d)==false){b.invalidText=b.validateText?b.validateText:"";b.afterValid(false);return false}}if(b.allowChar&&d.length>0&&b.displayText!=d){for(var a=0;a<d.length;a++){var f=d.charAt(a);if(b.allowChar.indexOf(f)==-1){b.invalidText=String.format(b.invalidCharText,d,f);b.afterValid(false);return false}}}if(!b.checkLength()){b.afterValid(false);return false}if(!b.allowBlank&&(d==null||d===""||b.displayText==d||d.length==0)){var e=b.title?b.title:b.hintPrefixText;b.invalidText=String.format(b.blankText,e);b.afterValid(false);return false}b.afterValid(true);b.afterValidate&&b.afterValidate.call(this,d);return true},afterValid:function(){var b=this,a=arguments[0];if(!a){if(!b.dom.field.hasClass(b.invalidCss)){b.dom.field.addClass(b.invalidCss);b.dom.fieldwrap.removeClass(b.focusCss)}b.showTip()}else{b.dom.field.removeClass(b.invalidCss);b.dom.fieldwrap.removeClass(b.focusCss);if(b.tooltip){b.tooltip.remove();b.tooltip=null}}},checkLength:function(){var a=this;var b=a.dom.field.val();var c=a.title?a.title:a.hintPrefixText;if(b.length<a.minlength){a.invalidText=String.format(a.minLengthText,c,a.minlength);return false}if(b.length>a.maxlength){a.invalidText=String.format(a.maxLengthText,c,a.maxlength);return false}return true},getValue:function(){var b=this,a=b.dom.field.val();if(b.displayText===a){return""}var c=b.dom.field.val();if(c&&typeof c=="string"){c=c.trim()}return c},setValue:function(){var a=this;EUI.form.TextField.superclass.setValue.call(this,arguments[0]);if(arguments.length!=0&&arguments[0]){a.dom.field.removeClass(a.displayCss)}else{a.initDisplayText()}if(this.checkInitValue){a.sysValidater()}},appendText:function(b){var a=this.value+b;this.setValue(a)},onResize:function(){var a=this;if(typeof a.width=="string"&&a.width.indexOf("%")>-1){a.setWidth(a.width)}},reset:function(){var a=this;if(!a.displayText||a.displayText==""){a.dom.field.val("")}else{a.initDisplayText()}this.initSubmitValue()},showTip:function(){if(!this.tooltip){this.tooltip=$("<div class='ux-tooltip'>"+this.invalidText+"</div>");$("body").append(this.tooltip)}else{this.tooltip.html(this.invalidText)}var a=this.dom.field.offset();this.tooltip.css({top:a.top+this.dom.field.height()+15,left:a.left+5});return this.tooltip},hideTip:function(){this.tooltip&&this.tooltip.hide()}});EUI.TriggerField=function(){return new EUI.form.TriggerField(arguments[0])};EUI.form.TriggerField=EUI.extend(EUI.form.TextField,{editable:false,canClear:false,shadow:true,loadonce:true,showTrigger:true,maxListHeight:200,beforeSelect:null,afterSelect:null,listCss:"ux-list",triggerCss:"ux-trigger",triggerHoverCss:"ux-trigger-hover",triggerClickCss:"ux-trigger-click",triggerDisableCss:"ux-trigger-disable",multiBoxCls:"ux-list-multibox",reader:null,initComponent:function(){EUI.form.TriggerField.superclass.initComponent.call(this);this.initReader();this.loading=false},getType:function(){return"TriggerField"},initField:function(){EUI.form.TriggerField.superclass.initField.call(this);if(!this.editable){this.dom.field.attr("readonly",true);this.dom.field.addClass("ux-hand")}this.initTrigger();if(this.readonly){this.setReadOnly(true)}},setWidth:function(){var a=parseInt(arguments[0]);if(a){if(typeof arguments[0]=="string"&&arguments[0].indexOf("%")>-1){a/=100;a*=this.dom.parent().width();if(this.dom.label){if(!this.labelWidth){if(a*7/23<40){this.setLabelWidth(40);a-=40}if(a*7/23>70){this.setLabelWidth(70);a-=70}else{this.setLabelWidth(a*7/23);a-=(a*7/23)}}else{this.setLabelWidth(this.labelWidth);a-=this.labelWidth}}a-=10}a-=20;this.dom.field.width(a);this.width=arguments[0]}},setHeight:function(){var a=parseInt(arguments[0]);if(a){this.dom.field.height(a)}},setValue:function(){var b=this,a=arguments[0];EUI.form.TriggerField.superclass.setValue.call(this,a)},initTrigger:function(){var b=this;var a=$("<div class='"+this.triggerBoxCss+"'><span class='"+this.triggerCss+"'></span></div>");b.dom.triggerbtn=a;b.dom.field.after(a);if(!b.showTrigger){b.dom.triggerbtn.hide()}},addEvents:function(){var a=this;a.dom.field.bind("keydown",function(b){if(!a.editable){b.returnValue=false;return false}});a.dom.fieldwrap.bind("click",function(){if(!a.readonly){a.onClick()}});$(document).bind("click",function(b){if(b.button==2){return}var c=b.target;if(c){if($(c).parents("#"+a.id).length!=0){return}if($(c).parents("div[euiid='"+a.id+"']").length!=0){return}}a.hideList()}).bind("scroll",function(){a.hideList()});EUI.form.TriggerField.superclass.addEvents.call(this)},setReadOnly:function(a){var b=this;EUI.form.TriggerField.superclass.setReadOnly.call(this,a);if(a=="true"||a==true){b.dom.triggerbtn.addClass(b.triggerDisableCss)}else{b.dom.triggerbtn.removeClass(b.triggerDisableCss);b.dom.triggerbtn.show()}if(!b.editable){b.dom.field.attr("readonly",true)}},onClick:function(){var a=this;if(!a.dom.field.hasClass(a.focusCss)){a.dom.field.addClass(a.focusCss)}a.dom.triggerbtn.addClass(a.triggerClickCss);this.showList()},addLoadMask:function(){var a=this;var b=$('<div class="ux-combo-list-loading"></div>');b.html("加载中...");a.list.loadMask=b;a.list.append(b)},removeLoadMask:function(){this.list&&this.list.loadMask&&this.list.loadMask.remove()},initReader:function(){var d=this,a={};var c=d.field,b=d.name,e;if(d.reader){b=d.reader.name?d.reader.name:b;if(d.reader.field){if(d.reader.field.length!=d.field.length){throw new Error(EUI.error.neqField)}c=d.reader.field}if(c){e=c.push(b)}else{e=[b]}a.mixField=e}a.name=b;a.field=c;d.sysReader=a},initList:function(){var b=this;b.loading=true;if(b.store){if(b.beforeLoad){var a=b.beforeLoad.call(this,b.store);if(a==false){b.loading=false;return}}var e=new Date().getTime();b.timeStamp=e;var d=$("<div></div>");d.attr("euiid",b.id).addClass(b.listCss);b.list=d;$("body").append(d);b.addLoadMask();b.store.load({success:function(g){if(b.timeStamp==e){if(!g.data){var f=$("<span style='color:gray;line-height:20px;padding:0 3px;'>"+b.emptyText+"</span>");b.list.html(f);b.setListPos();return}b.data=g.data;b.afterLoad&&b.afterLoad.call(this,g.data);b.showComboList()}}})}else{var c=this.getData();var e=new Date().getTime();b.timeStamp=e;var d=$("<div></div>");d.attr("euiid",b.id).addClass(b.listCss);b.list=d;$("body").append(d);b.addLoadMask();b.showComboList()}},showComboList:function(){var b=this,c=b.getData();b.removeLoadMask();var a=b.getValue();b.listbox=$('<div euiid="'+b.id+'" class="'+b.listInner+'"></div>');b.listbox.css("max-height",b.maxListHeight);b.list.append(b.listbox);b.addListItem(c,a)},addListItem:function(j,b){var h=this;var a=$("<span style='color:gray;line-height:20px;padding:0 3px;'>"+h.emptyText+"</span>");h.listbox.empty();for(var d=0;d<j.length;d++){var e=j[d];var c=h.sysReader.name;var f=$("<div>"+e[c]+"</div>");f.addClass(h.listItemCss);f.data("itemdata",e);if(e[c]==b){f.addClass(h.seletedCss)}h.listbox.append(f)}if(!j||j.length==0){h.listbox.append(a)}h.addListItemEvent();h.loading=false;h.dom.triggerbtn.addClass(h.triggerClickCss)},showList:function(){var a=this;var b=this.getData();if(!a.loadonce){b=null;a.list&&a.list.remove();a.initList()}else{if(a.loading||a.list){a.setListPos()}else{a.initList()}}},setListPos:function(){var h=this;var b=h.dom.field.offset();var d=h.dom.field.outerHeight();var i=b.top+d;var a=h.list.height();var c=0;var f=h.dom.fieldwrap.width();f=f<h.listWidth?h.listWidth:f;if($(window).height()<=(a+i)){var e=b.top-a-4;if(e>0){i=e}}h.list.css({left:b.left-1,top:i,width:f,"z-index":"10000"}).slideDown("fast")},getData:function(){return this.data},hideList:function(){var a=this;a.dom.triggerbtn&&a.dom.triggerbtn.removeClass(a.triggerClickCss);a.list&&a.list.slideUp("fast")},remove:function(){var a=this;if(a.list){a.list.remove()}EUI.form.TriggerField.superclass.remove.call(this)}});EUI.ComboBox=function(){return new EUI.form.ComboBox(arguments[0])};EUI.form.ComboBox=EUI.extend(EUI.form.TriggerField,{data:null,async:true,store:null,editable:false,loadMask:true,showSearch:false,searchText:null,beforeLoad:null,afterLoad:null,listWidth:0,listInner:"ux-combo-list-inner",listItemCss:"ux-combo-list-item",seletedCss:"ux-combo-item-selected",initComponent:function(){EUI.form.ComboBox.superclass.initComponent.call(this);if(this.readonly){this.async=true}if(this.store){this.initStore()}},getType:function(){return"ComboBox"},addListItemEvent:function(){var a=this;$("."+a.listItemCss,a.list).each(function(){var b=$(this);b.bind("click",function(){var d=$(this).data("itemdata");if(a.beforeSelect){var c={};c.oldText=a.getValue();c.oldValue=a.getSubmitValue();c.data=d;if(a.beforeSelect(c)==false){a.hideList();return}}a.selectData(d);a.sysValidater();a.hideList();$(this).addClass(a.seletedCss).siblings().removeClass(a.seletedCss);if(a.afterSelect){var e={};e.text=a.getValue();e.value=a.getSubmitValue();e.data=d;a.afterSelect(e)}return false})})},selectData:function(){var e=this;var a=e.sysReader.name,j=arguments[0],h,b;e.setValue(j[a]);if(e.field){var d=e.sysReader.field,c;h={};for(b=0;b<e.field.length;b++){c=d[b];a=e.field[b];var f=e.getJsonData(j,c);h[a]=f!=undefined&&f!=null?f:""}e.submitValue=h}},initStore:function(){var b=this;b.store.autoLoad=!b.async;b.store.success=function(c){b.data=c.data;b.afterLoad&&b.afterLoad.call(this,c.data)};if(!b.async){b.beforeLoad&&b.beforeLoad.call(this,b.store)}var a=EUI.Store(b.store);b.store=a},showComboList:function(){var a=this;EUI.form.ComboBox.superclass.showComboList.call(a);a.setListPos()},remove:function(){var a=this;EUI.form.ComboBox.superclass.remove.call(a);if(a.showSearch){a.searchCmp.remove()}}});EUI.AutoCompleteBox=function(){return new EUI.form.AutoCompleteBox(arguments[0])};EUI.form.AutoCompleteBox=EUI.extend(EUI.form.ComboBox,{editable:true,data:null,renderTo:null,store:null,async:true,searchField:null,showField:null,loaded:false,tbar:null,initComponent:function(){EUI.form.AutoCompleteBox.superclass.initComponent.call(this);if(this.store){this.initStore()}if(!this.showField){this.showField=this.name}if(!this.searchField){this.searchField=[this.showField]}if(this.data){this.loaded=true}},initStore:function(){var b=this;b.store.autoLoad=!b.async;b.store.success=function(c){b.data=c.data;b.loaded=true;b.afterLoad&&b.afterLoad.call(this,c.data);if(b.loading){b.dom.field.trigger("keyup")}};if(!b.async){if(b.beforeLoad){var a=b.beforeLoad.call(this,b.store);if(a==false){return}}b.store.autoLoad=true}b.store=EUI.Store(b.store)},initList:function(){var b=this;b.loading=true;if(b.store){if(b.beforeLoad){var a=b.beforeLoad.call(this,b.store);if(a==false){b.loading=false;return}}var d=new Date().getTime();b.timeStamp=d;var c=$("<div></div>");c.attr("euiid",b.id).addClass(b.listCss).css("overflow","hidden");b.list=c;$("body").append(c);b.addLoadMask();b.store.load({success:function(f){if(b.timeStamp==d){if(!f.data){var e=$("<span style='color:gray;line-height:20px;padding:0 3px;'>"+b.emptyText+"</span>");b.list.html(e);b.setListPos();return}b.data=f.data;b.afterLoad&&b.afterLoad.call(this,f.data);b.showComboList(b.data)}}})}else{var d=new Date().getTime();b.timeStamp=d;var c=$("<div></div>");c.attr("euiid",b.id).addClass(b.listCss).css("overflow","hidden");b.list=c;$("body").append(c);b.addLoadMask();b.showComboList(b.getData())}},addEvents:function(){var a=this;EUI.form.AutoCompleteBox.superclass.addEvents.call(this);a.dom.field.bind({keyup:function(g){var c=g.keyCode||g.charCode;if(c==40){if(!a.listbox){return}var b=a.listbox.find("."+a.seletedCss);if(b.length==0){b=a.listbox.find("."+a.listItemCss+":first").addClass(a.seletedCss)}else{if(b.next().length!=0){b.removeClass(a.seletedCss);b.next().addClass(a.seletedCss);var f=b.next().offset().top;if(f+26>a.list.offset().top+a.listbox.height()){a.listbox[0].scrollTop+=26}}}}else{if(c==38){if(!a.listbox){return}var b=a.listbox.find("."+a.seletedCss);if(b.length!=0&&b.prev().length!=0){b.removeClass(a.seletedCss);b.prev().addClass(a.seletedCss);var f=b.prev().offset().top;if(f<a.list.offset().top){a.listbox[0].scrollTop-=26}}}else{if(c==13){if(!a.listbox){return}a.listbox.find("."+a.seletedCss).click()}else{if(c==9){return false}else{var d=$(this).val();a.onSearch(d)}}}}}});if(a.dom.clearTrigger){a.dom.clearTrigger.hover(function(){$(this).addClass("ux-trigger-over")},function(){$(this).removeClass("ux-trigger-over")})}},onClick:function(){var a=this;if(!a.loadonce){a.data=null;a.list&&a.list.remove();a.list=null}if(!a.list&&!a.getData()){a.initList();return}if(a.list){a.setListPos()}else{a.showComboList(a.getData())}},onSearch:function(d){var b=this;if(!b.loaded){if(!b.store){if(!b.getData()||b.getData().length==0){b.list.html("<div class='ux-combo-list-item'>没有数据</div>");b.setListPos();return}}else{if(b.beforeLoad){var a=b.beforeLoad.call(this,b.store);if(a==false){return}}b.store.autoLoad=true;b.loading=true;b.store.load();b.list.empty();var c=$('<div class="ux-combo-list-loading"></div>');c.html(EUI.LoadMask.prototype.msg);b.list.loadMask=c;b.list.append(c);b.setListPos();return}}this.doSearch(d,this.searchField)},doSearch:function(h,k){var f=this;f.filterData=[];var h=h?h.toLowerCase():"";if(this.getData()){if(h==""){f.filterData=this.getData()}else{for(var d=0;d<this.getData().length;d++){var a=this.getData()[d];for(var c=0;c<k.length;c++){var b=a[k[c]];if(!b){continue}var e=String(b).toLowerCase();if(e.indexOf(h)!=-1){if(e==h){a.selected=true}else{a.selected=false}f.filterData.push(a);break}}}}if(f.filterData.length>0){f.showComboList(f.filterData)}else{f.list.html("<div class='ux-combo-list-item'>没有匹配的数据</div>");f.setListPos()}}},setData:function(a){this.data=a;this.loaded=true;if(this.list&&this.list.is(":visible")){this.showComboList(this.getData())}},showComboList:function(d){var c=this;if(!this.list){this.initList();return}if(!d||d.length==0){var a=$("<span style='color:gray;line-height:26px;padding:0 3px;'>"+c.emptyText+"</span>");c.list.html(a);if(this.tbar){c.list.append(this.tbar)}c.setListPos();return}c.removeLoadMask();c.list.empty();var b=c.getValue();c.listbox=$('<div euiid="'+c.id+'" class="'+c.listInner+'"></div>').css("overflow","auto");c.list.append(c.listbox);c.listbox.css("max-height",c.maxListHeight);if(this.tbar){c.list.append(this.tbar)}c.addListItem(d,b)},addListItem:function(c,j){var f=this;f.listbox.empty();for(var d=0;d<c.length;d++){var h=c[d];var a=f.sysReader.name;var k=$("<div></div>");k.addClass(f.listItemCss);if(this.itemRender){var e=this.itemRender.call(this,h);k.html(e)}else{k.html(h[f.showField])}k.data("itemdata",h);if(h[a]==j||c.length==1){k.addClass(f.seletedCss)}else{if(h.selected){k.removeClass(f.seletedCss)}}f.listbox.append(k)}if(!(c instanceof Array)||c instanceof Array&&c.length==0){var b=$("<span style='color:gray;line-height:26px;'>"+f.emptyText+"</span>");f.listbox.append(b)}f.addListItemEvent();f.loading=false;f.setListPos()},addListItemEvent:function(){var a=this;$("."+a.listItemCss,a.list).each(function(){var b=$(this);b.bind("click",function(){var d=$(this).data("itemdata");if(a.beforeSelect){var c={};c.oldText=a.getValue();c.oldValue=a.getSubmitValue();c.data=d;if(a.beforeSelect(c)==false){a.hideList();return}}a.selectData(d);a.sysValidater();a.hideList();$(this).addClass(a.seletedCss).siblings().removeClass(a.seletedCss);if(a.afterSelect){var e={};e.text=a.getValue();e.value=a.getSubmitValue();e.data=d;a.afterSelect(e)}return false})})},setValue:function(){var b=this,a=arguments[0];EUI.form.TriggerField.superclass.setValue.call(this,a)},getData:function(){return this.data}});EUI.ComboTree=function(){return new EUI.form.ComboTree(arguments[0])};EUI.form.ComboTree=EUI.extend(EUI.form.TriggerField,{async:true,searchText:null,showSearch:true,listHeight:200,listWidth:260,treeCfg:null,initComponent:function(){EUI.form.ComboTree.superclass.initComponent.call(this);if(this.beforeLoad){this.on("beforeLoad",this.beforeLoad)}if(this.afterLoad){this.on("afterLoad",this.afterLoad)}if(this.readonly){this.async=true}},getType:function(){return"ComboTree"},initList:function(){var b=this;b.loading=true;if(!b.data){var a=b.fireEvent("beforeLoad",this);if(a==false){b.loading=false;return}var d=new Date().getTime();b.timeStamp=d;var c=$("<div></div>");c.attr("euiid",b.id).addClass(b.listCss);b.list=c;b.addLoadMask();$("body").append(c);b.setListPos();if(b.store){b.store.load({success:function(e){if(b.timeStamp==d){b.data=e.data;b.fireEvent("afterLoad",e.data);b.showComboList()}}})}else{throw new Error(EUI.error.dataError)}}else{var d=new Date().getTime();b.timeStamp=d;var c=$("<div></div>");c.attr("euiid",b.id).addClass(b.listCss);b.list=c;b.addLoadMask();$("body").append(c);b.setListPos();b.showComboList()}},showComboList:function(){var c=this;c.removeLoadMask();var d=EUI.getId("TreePanel");c.list.append($("<div id='"+d+"'></div>"));var b={renderTo:d,height:c.listHeight,width:c.listWidth,data:c.data,padding:0};EUI.applyIf(c.treeCfg,b);c.treeCfg.onSelect=function(e){c.selectNode(e)};var a=EUI.TreePanel(c.treeCfg);a.parentCmp=this.id;c.tree=a;c.dom.triggerbtn.addClass(c.triggerClickCss);c.loading=false;c.setListPos()},selectNode:function(c){var a=this;if(a.beforeSelect){var b={};b.oldText=a.getValue();b.oldValue=a.getSubmitValue();b.data=c;if(a.beforeSelect(b)==false){return}}a.selectData(c);if(a.afterSelect){var d={};d.text=a.getValue();d.value=a.getSubmitValue();d.data=c;a.afterSelect(d)}a.hideList()},setListPos:function(){var i=this;var m=i.dom.field.offset();var a=i.dom.field.outerHeight(),f=i.dom.field.outerWidth();var k=m.top+a,c=m.left;var d=i.list.height(),j=i.list.width();if($(window).height()<=(d+k)){var e=(m.top-a-d+20);if(e>0){k=e}}if($(window).width()<=(j+c)){var l=(c+f+15-j);if(!i.clear){l+=17}if(l>0){c=l}}var h=0;var b=i.dom.field.width()+h+6;b=b<i.listWidth?i.listWidth:b;i.list.css({left:c-1,top:k,width:b,"z-index":++EUI.zindex}).show();i.shadow&&i.dom.shadow&&i.dom.shadow.updateShadow(i.list)},selectData:function(j){var e=this;if(!j){return}var a=e.sysReader.name,h,b;e.setValue(j[a]);if(e.field){var d=e.sysReader.field,c;h={};for(b=0;b<e.field.length;b++){c=d[b];a=e.field[b];var f=e.getJsonData(j,c);if(f!=undefined&&f!=null){h[a]=f}else{h[a]=""}}e.submitValue=h}e.sysValidater()},getValue:function(){var a=EUI.form.ComboTree.superclass.getValue.call(this);return a},addEvents:function(){var a=this;EUI.form.ComboTree.superclass.addEvents.call(this);a.canClear&&a.dom.clearTrigger.bind("click",function(){a.tree&&a.tree.tree.cancelSelect()})},remove:function(){var a=this;EUI.form.ComboTree.superclass.remove.call(this);EUI.remove(a.tree);a.tree=null}});EUI.ComboGrid=function(){return new EUI.form.ComboGrid(arguments[0])};EUI.form.ComboGrid=EUI.extend(EUI.form.TriggerField,{async:false,searchConfig:{},listHeight:200,beforeLoad:null,afterLoad:null,gridCfg:{},showSearch:true,onSearch:null,gridCss:"ux-combo-grid",initComponent:function(){EUI.form.ComboGrid.superclass.initComponent.call(this)},getType:function(){return"ComboGrid"},initList:function(){var d=this;if(!d.list){var b=EUI.getId("ToolBar");var f=EUI.getId("GridPanel");var e=$("<div class='"+d.listCss+"'><div id='"+b+"' style='border-bottom: 1px solid #ddd;'></div><div id='"+f+"'></div></div>");e.bind("click",function(g){g.stopPropagation()});d.list=e;$("body").append(e);d.setListPos();if(this.showSearch){EUI.ToolBar({renderTo:b,items:["->",{xtype:"SearchBox",onSearch:function(g){d.onSearch&&d.onSearch.call(d,g)}}]})}d.gridCfg.recordtext=EUI.cmpText.recordtext;d.gridCfg.pager=null;var a={renderTo:f,height:d.listHeight,searchConfig:d.searchConfig,gridCfg:d.gridCfg,gridCss:d.gridCss,contentCss:d.contentCss,subheight:53};if(!d.gridCfg.multiselect){d.gridCfg.ondblClickRow=function(){d.selectRow()}}else{d.gridCfg.gridComplete=function(g){d._setSelect.call(d)};d.gridCfg.onSelectRow=function(h,g){if(g){d.multiSelectRow.call(d,h)}else{d.multiCancelSelectRow.call(d,h)}};d.gridCfg.onSelectAll=function(j,g){if(g){for(var h=0;h<j.length;h++){d.multiSelectRow.call(d,j[h])}}else{for(var h=0;h<j.length;h++){d.multiCancelSelectRow.call(d,j[h])}}}}var c=EUI.GridPanel(a);c.parentCmp=this.id;d.grid=c;d.dom.triggerbtn.addClass(d.triggerClickCss);d.loading=false;d.setListPos()}},_setSelect:function(){if(!this.grid){return}if(this.name=="id"||this.field.includes("id")){var c=this.getSubmitValue();if(!c){return}for(var a in c){var b=c[a];var d=b.id;this.grid.grid.setSelection(d,false)}}},multiSelectRow:function(c){var e=this.grid.getRowData(c);var b=this.getSubmitValue();var a=this.readSelectData(e);if(!b){b={}}if(b[a[0]]){return}b[a[0]]=a[1];this.submitValue=b;var d=this.value;if(d){d+=","}else{d=""}d+=e[this.sysReader.name];this.setValue(d)},readSelectData:function(e){var f=this;var b={};var k=e[this.sysReader.name];b[this.name]=e[this.sysReader.name];if(f.field){var h=f.sysReader.field,c,i;for(var d=0;d<f.field.length;d++){c=h[d];i=f.field[d];var a=f.getJsonData(e,c);b[i]=a!=undefined&&a!=null?a:"";k+=b[i]}}return[k,b]},multiCancelSelectRow:function(f){var h=this.grid.getRowData(f);var e=this.getSubmitValue();var c=this.readSelectData(h);if(!e||!e[c[0]]){return}delete e[c[0]];this.submitValue=e;var g="",a=true;for(var b in this.submitValue){var d=this.submitValue[b];if(a){a=false}else{g+=","}g+=d[this.name]}this.setValue(g)},selectRow:function(){var a=this;var c=a.grid.getSelectRow();if(c&&((c instanceof Array)&&c.length>0||!(c instanceof Array))){if(a.beforeSelect){var b={};b.oldText=a.getValue();b.oldValue=a.getSubmitValue();b.data=c;b.isMulti=a.gridCfg.multiselect;if(a.beforeSelect(b)==false){a.hideList();return}}a.selectData(c);if(a.afterSelect){var d={};d.text=a.getValue();d.value=a.getSubmitValue();d.data=c;a.afterSelect(d)}}a.hideList()},setListPos:function(){var h=this;var m=h.dom.field.offset();var a=h.dom.field.outerHeight(),e=h.dom.field.outerWidth();var k=m.top+a,c=m.left;var d=h.list.height(),j=h.list.width();if($(window).height()<=(d+k)){var i=(m.top-a-d+20);if(i>0){k=i}}if($(window).width()<=(j+c)){var l=(c+e+15-j);if(h.canClear&&!h.clear){l+=17}if(l>0){c=l}}var f=0;var b=h.dom.field.width()+f+6;b=h.listWidth?h.listWidth:b;h.list.css({left:c-1,top:k,width:b,"z-index":++EUI.zindex}).show();h.shadow&&h.dom.shadow&&h.dom.shadow.updateShadow(h.list)},selectData:function(){var j=this;var b=j.sysReader.name,f=arguments[0],a,h,e=null;if(!j.gridCfg.multiselect){j.setValue(f[b])}if(j.field){var k=j.sysReader.field,d;a={};for(h=0;h<j.field.length;h++){d=k[h];b=j.field[h];var c=j.getJsonData(f,d);if(c!=undefined&&c!=null){a[b]=c}else{a[b]=""}}j.submitValue=a}j.sysValidater()},setValue:function(a){if(a&&typeof a=="string"){a=a.trim()}this.dom.field.val(a);this.value=a},getValue:function(){var a=this.dom.field.val();if(a){a=a.trim()}return a},loadData:function(a){this.setSubmitValue(a)},setSubmitValue:function(h){if(this.gridCfg.multiselect){if(g instanceof Array){this.submitValue={};var g="";for(var e=0;e<h.length;e++){var a=this.getJsonData(h[e],this.name);var d=a;if(e>0){g+=","}g+=a;var c={};c[this.name]=a;if(this.field){for(var b=0;b<this.field.length;b++){var f=this.getJsonData(h[e],this.field[b]);f=(filedValue!=undefined&&filedValue!=null)?filedValue:"";c[this.field[b]]=f;d+=f}}this.submitValue[d]=c}this.setValue(g)}}else{var a=this.getJsonData(h,this.name);this.setValue(a);this.submitValue={};this.submitValue[this.name]=a;if(this.field){for(var e=0;e<this.field.length;e++){var f=this.getJsonData(h,this.field[e]);f=(filedValue!=undefined&&filedValue!=null)?filedValue:"";this.submitValue[this.field[e]]=f}}}},getSubmitValue:function(){return this.submitValue},remove:function(){var a=this;EUI.form.ComboGrid.superclass.remove.call(this);EUI.remove(a.grid);a.grid=null},showList:function(){var a=this;if(!a.loadonce){a.remove();a.initList()}else{if(a.loading||a.list){a.list.show();a.setListPos()}else{a.initList()}}},updatePostParam:function(a){if(this.grid){this.grid.resetParam();this.grid.setPostParams(a)}}});EUI.FieldGroup=function(){return new EUI.form.FieldGroup(arguments[0])};EUI.form.FieldGroup=EUI.extend(EUI.form.TextField,{width:400,isFormField:false,needValid:false,itemspace:20,spaceCss:"ux-fieldgroup-space",itemCss:"ux-fieldgroup-item",initComponent:function(){EUI.form.FieldGroup.superclass.initComponent.call(this);if(this.readonly){var a=this.defaultStyle||{};this.defaultStyle=EUI.apply(a,{readonly:true})}},getType:function(){return"FieldGroup"},render:function(){var a=this;a.dom.addClass(a.domCss);a.initLabel();a.setWidth(a.width)},sysValidater:function(){var a=this;if(a.hidden){return true}if(a.needValid){return a.doValidate(a.items)}return true},doValidate:function(){var b=arguments[0];var a=true;if(b){for(var d=0;d<b.length;d++){var e=EUI.getCmp(b[d]);if(e.isFormField){var c=e.sysValidater();a=a&&c}else{if(e.items){a=this.doValidate(e.items)&&a}}}}return a},setAllowBlank:function(a){var d=this;EUI.form.FieldGroup.superclass.setAllowBlank.call(this);if(d.items){for(var b=0;b<d.items.length;b++){var c=EUI.getCmp(d.items[b]);c.setAllowBlank(a)}}},setWidth:function(){var a=parseInt(arguments[0]);if(a){if(typeof arguments[0]=="string"&&arguments[0].indexOf("%")>-1){a/=100;a*=this.dom.parent().width();a-=10}this.dom.width(a);this.width=arguments[0]}},addItems:function(){var g=this,items=g.options.items;for(var i=0;i<items.length;i++){var item=items[i];var id=item.id||EUI.getId("groupitem");var div=$("<div id='"+id+"'></div>").addClass(g.itemCss);if(i!=items.length-1){div.css("margin-right",g.itemspace)}g.dom.append(div);if(typeof item=="string"){div.html(item).css("margin-top",4)}else{item.renderTo=id;var xtype=item.xtype?item.xtype:g.defaultConfig;if(!xtype){throw new Error(EUI.error.noXtype)}var cmp=eval("EUI."+xtype);if(!cmp){throw new Error(String.format(EUI.error.noCmp,xtype))}cmp=cmp.call(cmp,item);g.items.push(cmp.id)}}},addChild:function(item,preId){var g=this;var id=item.id||EUI.getId("groupitem");var div=$("<div id='"+id+"'></div>").addClass(g.itemCss).css("margin-right",g.itemspace);if(preId!=undefined){$("#"+preId,g.dom).after(div)}else{g.dom.append(div)}if(typeof item=="string"){div.html(item).css("margin-top",4)}else{item.renderTo=id;var xtype=item.xtype?item.xtype:g.defaultConfig;if(!xtype){throw new Error(EUI.error.noXtype)}var cmp=eval("EUI."+xtype);if(!cmp){throw new Error(String.format(EUI.error.noCmp,xtype))}cmp=cmp.call(cmp,item);g.items.push(cmp.id)}},removeChild:function(a){if(typeof a=="number"){var c=EUI.getCmp(this.items[a]);c.remove();this.items.splice(a,1)}else{for(var b=0;b<this.items.length;b++){if(a==this.items[b]){var c=EUI.getCmp(a);c.remove();this.items.splice(b,1)}}}},getData:function(){var d=[];for(var c=0;c<this.items.length;c++){var a=EUI.getCmp(this.items[c]);if(a instanceof EUI.form.FieldGroup){var b=a.getData();if(b!=false){d.push(b)}else{return false}}else{if(a instanceof EUI.form.Field){if(a.sysValidater()){if(a.getValue()){d.push(a.getSubmitValue())}}else{return false}}}}return d},reset:function(){for(var b=0;b<this.items.length;b++){var a=EUI.getCmp(this.items[b]);if(a instanceof EUI.form.Field){a.reset()}}},remove:function(){for(var a=0;a<this.items.length;a++){var b=EUI.getCmp(this.items[a]);b&&b.remove()}this.dom.remove();delete EUI.managers[this.id]}});EUI.ComboSearch=function(){return new EUI.form.ComboSearch(arguments[0])};EUI.form.ComboSearch=EUI.extend(EUI.UIComponent,{labelWidth:60,width:150,unit:"",editable:false,onSearch:null,onConfirm:null,listForm:null,onClickUnit:null,triggerBoxCss:"ux-trigger-box",triggerCss:"ux-trigger",triggerClickCss:"ux-trigger-click",labelStyle:{"font-weight":"bold"},initComponent:function(){EUI.form.ComboSearch.superclass.initComponent.call(this)},getType:function(){return"ComboSearch"},render:function(){this.dom.addClass("ux-field");this.initLabel();this.initField();this.addEvents();if(this.value){this.setValue(this.value)}},initLabel:function(){this.label=$("<label title='"+this.title+"' class='ux-field-label' style='font-weight:bold;'>"+this.title+"</label>").width(this.labelWidth);this.dom.append(this.label)},initField:function(){var a="";if(this.unit){a="<span class='ux-unitfield-unit'>"+this.unit+"</span>"}var b="<div class='ux-field ux-fieldgroup-item' style='margin-right: 20px;'><div class='ux-field-element'><input class='ux-field-text ux-combosearch-input' style='display: inline-block;'"+(this.editable?"":"readonly='readonly'")+"/>"+a+"<div class='"+this.triggerBoxCss+"'><span class='"+this.triggerCss+"'></span></div></div></div><div class='ux-button-select ux-fieldgroup-item search' style='margin-right: 20px;'>查询</div>";this.dom.append(b);this.dom.field=$(".ux-field-text",this.dom).width(this.width);this.dom.triggerbtn=$(".ux-trigger",this.dom)},addEvents:function(){var a=this;this.dom.field.bind("click",function(){if(!a.editable){a.dom.triggerbtn.addClass(a.triggerClickCss);a.showList()}});this.dom.triggerbtn.bind("click",function(){a.dom.triggerbtn.addClass(a.triggerClickCss);a.showList()});$(".ux-unitfield-unit",a.dom).bind("click",function(){a.dom.triggerbtn.addClass(a.triggerClickCss);a.showList()});$(".search",this.dom).bind("click",function(){a.onSearch.call(a,a.getValue())});$(document).bind("click",function(b){if(b.button==2){return}var c=b.target;if(c){if($(c).parents("#"+a.id).length!=0){return}if($(c).parents("div[euiid='"+a.id+"']").length!=0){return}}a.hideList()}).bind("scroll",function(){a.hideList()})},initList:function(){var a=this;var b=$("<div class='ux-list'><div id='list_"+this.id+"'></div><div class='ux-msgbox-optbox' style='margin-bottom: 10px;'></div></div>");b.attr("euiid",a.id).addClass(a.listCss);a.list=b;$("body").append(b);if(this.listForm){EUI.applyIf(this.listForm,{renderTo:"list_"+this.id,height:200,width:200});this.form=EUI.FormPanel(this.listForm)}this.initButtons();this.setListPos()},initButtons:function(){var b=this;var a=$(".ux-msgbox-optbox",this.list);var c=EUI.getId("Button");a.append("<div id='"+c+"'></div>");this.resetBtn=EUI.Button({title:"重置",renderTo:c,handler:function(){b.form.reset()}});c=EUI.getId("Button");a.append("<div id='"+c+"'></div>");this.okBtn=EUI.Button({title:"确定",renderTo:c,selected:true,handler:function(){if(b.onConfirm){var d=b.getValue();b.onConfirm.call(b,d)}}})},showList:function(){if(!this.list){this.initList()}else{this.setListPos()}},setListPos:function(){var e=this;var b=e.dom.field.offset();var c=e.dom.field.outerHeight();var f=b.top+c;var a=e.list.height();if($(window).height()<=(a+f)){var d=b.top-a-4;if(d>0){f=d}}e.list.css({left:b.left-1,top:f,"z-index":++EUI.zindex}).slideDown("fast")},hideList:function(){var a=this;a.dom.triggerbtn&&a.dom.triggerbtn.removeClass(a.triggerClickCss);a.list&&a.list.slideUp("fast")},setValue:function(a){this.dom.field.val(a)},getValue:function(){if(!this.form){return null}return this.form.getFormValue()},setWidth:function(a){this.combo.setWidth(a)},setUnit:function(a){$(".ux-unitfield-unit",this.dom).html(a)},remove:function(){this.resetBtn.remove();this.okBtn.remove();this.group.remove();this.listForm.remove();EUI.form.ComboSearch.superclass.remove.call(this)}});EUI.SearchBox=function(){return new EUI.form.SearchBox(arguments[0])};EUI.form.SearchBox=EUI.extend(EUI.form.TriggerField,{editable:true,onSearch:null,width:260,triggerCss:"ux-search-trigger",initComponent:function(){EUI.form.SearchBox.superclass.initComponent.call(this)},getType:function(){return"SearchBox"},afterClear:function(){this.doSearch()},setValue:function(a){EUI.form.SearchBox.superclass.setValue.call(this,a)},doSearch:function(){var b=this;var a=b.getValue();b.onSearch&&b.onSearch.call(b,a)},onClick:function(){},addEvents:function(){var a=this;if(!a.readonly&&a.onSearch instanceof Function&&!a.dom.triggerbtn.hasClass(a.triggerDisableCss)){a.dom.triggerbtn.bind("click",function(){a.doSearch()});a.dom.field.bind("keyup",function(b){if(b.keyCode==13){a.doSearch()}})}EUI.form.SearchBox.superclass.addEvents.call(this)}});EUI.DateField=function(){return new EUI.form.DateField(arguments[0])};EUI.form.DateField=EUI.extend(EUI.form.TriggerField,{format:"Y-m-d",triggerCss:"ux-date-trigger",triggerClickCss:"",listWidth:210,value:null,minDate:null,maxDate:null,msg:null,initComponent:function(){EUI.form.DateField.superclass.initComponent.call(this)},getType:function(){return"DateField"},showList:function(){var a=this;if(!a.loading&&a.list){a.setListPos()}else{a.initList()}a.calendar.bulidContent()},initList:function(){var a=this;var b=$("<div id='calender_"+this.id+"'></div>");b.attr("euiid",a.id).addClass(a.listCss);a.list=b;$("body").append(b);var c=EUI.Calendar({renderTo:"calender_"+this.id,showDate:this.getValue(),callback:function(g){if(a.beforSelect){var f={};f.oldValue=a.getValue();f.nowValue=g;var e=a.beforSelect(f);if(e==false){return}}var d=a.validaterDate(g);if(d){a.setValue(g);a.sysValidater();if(a.afterSelect){a.afterSelect(g)}a.list.hide()}}});c.parentCmp=this.id;var b=c.dom;$("body").append(b);this.list=b;this.calendar=c;a.dom.triggerbtn.addClass(a.triggerClickCss);a.setListPos();a.loading=false},validaterDate:function(c){var b=this;if(!b.minDate&&!b.maxDate){return true}var a=b.checkDate(c);return a},sysValidater:function(){var a=this;var b=a.getValue();if(!a.allowBlank&&(b==null||b===""||a.displayText==b||b.length==0)){var c=a.title?a.title:"此项";a.invalidText=String.format(a.blankText,c);a.afterValid(false);return false}a.afterValid(true);a.afterValidate&&a.afterValidate.call(this,b);return true},afterValid:function(){var b=this,a=arguments[0];if(!a){if(!b.dom.field.hasClass(b.invalidCss)){b.dom.field.addClass(b.invalidCss);b.dom.fieldwrap.removeClass(b.focusCss)}b.showTip()}else{b.dom.field.removeClass(b.invalidCss);b.dom.fieldwrap.removeClass(b.focusCss);if(b.tooltip){b.tooltip.remove();b.tooltip=null}}},checkDate:function(b){var a=this;if(b){dateStr=b.substr(0,4)+b.substr(5,2)+b.substr(8,2);if(a.minDate!=null){if(a.minDate-dateStr>0){EUI.ProcessStatus({success:false,msg:a.msg});return false}}if(a.maxDate!=null){if(a.maxDate-dateStr<0){EUI.ProcessStatus({success:false,msg:a.msg});return false}}return true}return true},setWidth:function(){var a=parseInt(arguments[0]);if(a){if(typeof arguments[0]=="string"&&arguments[0].indexOf("%")>-1){a/=100;a*=this.dom.parent().width();if(this.dom.label){if(!this.labelWidth){if(a*7/23<40){this.setLabelWidth(40);a-=40}if(a*7/23>70){this.setLabelWidth(70);a-=70}else{this.setLabelWidth(a*7/23);a-=(a*7/23)}}else{this.setLabelWidth(this.labelWidth);a-=this.labelWidth}}a-=10}a-=22;this.dom.field.width(a);this.width=arguments[0]}}});EUI.CheckBox=function(){return new EUI.form.CheckBox(arguments[0])};EUI.form.CheckBox=EUI.extend(EUI.form.Field,{inputType:"checkbox",fieldCss:"ux-field-checkbox",fieldWrapCss:"ux-checkbox",onChecked:null,checked:false,readonlyCss:"ux-checkbox-readonly",initComponent:function(){EUI.form.CheckBox.superclass.initComponent.call(this)},getType:function(){return"CheckBox"},initField:function(){var b=this;EUI.form.CheckBox.superclass.initField.call(this);b.dom.fieldwrap.addClass(b.fieldWrapCss);var a=$('<span class="ux-icon"></span>');b.dom.field.hide();b.dom.fieldicon=a;b.dom.fieldwrap.append(a);if(b.checked){b.setValue(true);b.dom.fieldicon.click()}if(b.readonly){b.setReadOnly(b.readonly)}},addEvents:function(){var a=this;a.dom.fieldicon.bind("click",function(){if(!a.disabled){if(a.checked){a.dom.field.attr("checked",false);$(this).removeClass("checked");a.checked=false}else{a.checked=true;a.dom.field.attr("checked",true);$(this).addClass("checked")}if(a.onChecked&&a.onChecked instanceof Function){a.onChecked.call(a,a.getValue())}}});a.dom.label.bind("click",function(){a.dom.fieldicon.click()});a.dom.fieldwrap.hover(function(){if(!a.disabled){$(this).addClass(a.fieldWrapCss+"-over")}},function(){$(this).hasClass(a.fieldWrapCss+"-over")&&$(this).removeClass(a.fieldWrapCss+"-over")})},addCss:function(){},getValue:function(){return this.checked},getSubmitValue:function(){var a={};if(this.name){a[this.name]=this.getValue()}if(this.checked){EUI.applyIf(a,this.submitValue)}return a},setValue:function(a){var b=this;if(a!=undefined){a=a.toString().toLowerCase();if(a=="true"){b.dom.field.attr("checked",true);b.dom.fieldicon.addClass("checked");b.checked=true;if(b.disabled){b.dom.fieldwrap.addClass(b.fieldWrapCss+"-checked")}}else{b.checked=false;b.dom.field.attr("checked",false);b.dom.fieldicon.removeClass("checked");if(b.disabled){b.dom.fieldwrap.removeClass(b.fieldWrapCss+"-checked")}}}},sysValidater:function(){return true},setReadOnly:function(){var b=arguments;if(b.length!=0){var a=b[0]=="true"||b[0]==true?true:false;if(a){this.dom.fieldicon.addClass("disabled");this.disabled=true;this.checked&&this.dom.fieldwrap.addClass(this.fieldWrapCss+"-checked")}else{this.disabled=false;this.dom.fieldicon.removeClass("disabled");this.dom.fieldwrap.hasClass(this.fieldWrapCss+"-checked")&&this.dom.fieldwrap.removeClass(this.fieldWrapCss+"-checked")}}},reset:function(){var a=this;a.dom.field.attr("checked",false);a.dom.fieldicon.removeClass("checked");a.dom.fieldwrap.removeClass(a.fieldWrapCss+"-checked");a.checked=false}});EUI.RadioBox=function(){return new EUI.form.RadioBox(arguments[0])};EUI.form.RadioBox=EUI.extend(EUI.form.CheckBox,{inputType:"radio",labelFirst:false,inputValue:"",fieldCss:"ux-field-radiobox",fieldWrapCss:"ux-radiobox",readonlyCss:"ux-checkbox-readonly",initComponent:function(){EUI.form.RadioBox.superclass.initComponent.call(this)},getType:function(){return"RadioBox"},render:function(){var a=this;EUI.form.RadioBox.superclass.render.call(this);a.inputValue=a.inputValue==""?a.id:a.inputValue;a.dom.field.val(a.inputValue);if(this.checked){a.setValue(a.inputValue);a.dom.fieldicon.click()}if(a.readonly){a.setReadOnly(a.readonly)}},addEvents:function(){var a=this;a.dom.fieldicon.bind("click",function(){if(!a.checked){a.dom.field.attr("checked",true);$(this).addClass("checked");a.checked=true;if(a.onChecked&&a.onChecked instanceof Function){a.onChecked.call(a,a.getValue())}}});a.dom.label.bind("click",function(){a.dom.fieldicon.click()});a.dom.fieldwrap.hover(function(){if(!a.dom.fieldicon.hasClass("disabled")){$(this).addClass(a.fieldWrapCss+"-over")}},function(){$(this).hasClass(a.fieldWrapCss+"-over")&&$(this).removeClass(a.fieldWrapCss+"-over")})},getValue:function(){return this.checked},setValue:function(a){var b=this;if(a!=undefined){a=a.toString().toLowerCase();if(a=="true"){b.dom.field.attr("checked",true);b.dom.fieldicon.addClass("checked");b.checked=true;if(b.disabled){b.dom.fieldwrap.addClass(b.fieldWrapCss+"-checked")}if(b.onChecked&&b.onChecked instanceof Function){b.onChecked.call(b,b.getValue())}}else{b.checked=false;b.dom.field.attr("checked",false);b.dom.fieldicon.removeClass("checked");if(b.disabled){b.dom.fieldwrap.removeClass(b.fieldWrapCss+"-checked")}}}},getSubmitValue:function(){if(this.checked){var a={};if(this.name){a[this.name]=this.getValue()}EUI.applyIf(a,this.submitValue);return a}return""},setReadOnly:function(){var b=arguments;if(b.length!=0){var a=b[0]=="true"||b[0]==true?true:false;if(a){this.dom.fieldicon.addClass("disabled");this.disabled=true;this.dom.field.attr("checked")&&this.dom.fieldwrap.addClass(this.fieldWrapCss+"-checked")}else{this.dom.fieldicon.removeClass("disabled");this.disabled=false;this.dom.fieldwrap.hasClass(this.fieldWrapCss+"-checked")&&this.dom.fieldwrap.removeClass(this.fieldWrapCss+"-checked")}}},reset:function(){EUI.form.RadioBox.superclass.reset.call(this);this.dom.fieldwrap.removeClass(this.fieldWrapCss+"-checked")}});EUI.CheckBoxGroup=function(){return new EUI.form.CheckBoxGroup(arguments[0])};EUI.form.CheckBoxGroup=EUI.extend(EUI.form.TextField,{onChecked:null,itemAlign:"h",isFormField:true,defaultStyle:null,itemspace:20,onlyOneChecked:false,wrapCls:"ux-checkbox-wrap",itemCls:"ux-checkbox-item",invalidCls:"ux-checkbox-invalid",initComponent:function(){EUI.form.CheckBoxGroup.superclass.initComponent.call(this)},getType:function(){return"CheckBoxGroup"},render:function(){var a=this;a.dom.addClass("ux-field");a.initLabel();a.addEvents()},setCmpType:function(a){return EUI.CheckBox(a)},addItems:function(){var d=this,a=this.options.items;if(a&&d.dom){var e=d.title?d.dom.label.width():2;d.dom.fieldwrap=$("<div></div>").addClass(d.wrapCls).css("padding-left",e);d.dom.append(d.dom.fieldwrap);for(var b=0;b<a.length;b++){if(d.onChecked){a[b].onChecked=d.onChecked}if(d.readonly){a[b].readonly=d.readonly}a[b].labelFirst=false;a[b].isFormField=false;EUI.applyIf(a[b],this.defaultConfig);var c=d.setCmpType(a[b]);if(d.itemAlign=="h"){c.dom.addClass(d.itemCls)}else{c.dom.css("float","none")}c.dom.css("margin-right",this.itemspace);d.dom.fieldwrap.append(c.dom);this.items.push(c.id)}d.dom.fieldwrap.append("<div class='ux-clear'></div>");d.onlyOneChecked&&d.initGroupEvent()}},initGroupEvent:function(){var a=this;a.dom.fieldwrap.children("div.ux-field").each(function(){var b=EUI.getCmp($(this).attr("id"));b.dom.fieldicon.bind("click",function(){if(!b.disabled){for(var c=0;c<a.items.length;c++){var d=EUI.getCmp(a.items[c]);if(b.id!=d.id){d.reset()}}}})})},loadData:function(){this.reset();EUI.form.CheckBoxGroup.superclass.loadData.call(this,arguments[0])},setReadOnly:function(){var e=this,b=arguments;if(b.length!=0){var a=b[0]=="true"||b[0]==true?true:false;for(var c=0;c<e.items.length;c++){var d=EUI.getCmp(e.items[c]);d.setReadOnly(a)}}},setSubmitValue:function(){},getValue:function(){if(!this.name){throw new Error(String.format(EUI.error.noName,this.type))}var d={},a=[];for(var b=0;b<this.items.length;b++){var c=EUI.getCmp(this.items[b]);if(c.checked){a.push(c.name)}}d[this.name]=a;return d},setValue:function(b){this.reset();for(var a=0;a<b.length;a++){var e=b[a];for(var c=0;c<this.items.length;c++){var d=EUI.getCmp(this.items[c]);if(d.name==e){d.setValue(true)}}}},getSubmitValue:function(){return this.getValue()},sysValidater:function(){var b=this;if(!b.allowBlank){for(var a=0;a<b.items.length;a++){if(EUI.getCmp(b.items[a]).checked){b.dom.fieldwrap.removeClass(b.invalidCls);return true}}b.dom.fieldwrap.addClass(b.invalidCls);b.invalidText=b.validateText?b.validateText:b.blankText;return false}return true},reset:function(){var b=this;for(var a=0;a<b.items.length;a++){EUI.getCmp(b.items[a]).reset()}},addEvents:function(){},onResize:function(){}});EUI.RadioBoxGroup=function(){return new EUI.form.RadioBoxGroup(arguments[0])};EUI.form.RadioBoxGroup=EUI.extend(EUI.form.CheckBoxGroup,{onChecked:null,itemAlign:"h",defaultStyle:null,onlyOneChecked:true,wrapCls:"ux-radiobox-wrap",itemCls:"ux-radiobox-item",invalidCls:"ux-radiobox-invalid",initComponent:function(){EUI.form.RadioBoxGroup.superclass.initComponent.call(this)},getType:function(){return"RadioBoxGroup"},setCmpType:function(a){return EUI.RadioBox(a)},getValue:function(){for(var b=0;b<this.items.length;b++){var c=EUI.getCmp(this.items[b]);var d=c.getValue();if(d){var a={};a[this.name]=c.name;return a}}},setValue:function(c){for(var a=0;a<this.items.length;a++){var b=EUI.getCmp(this.items[a]);if(b.name==c){b.setValue(true)}else{b.setValue(false)}}},loadData:function(a){this.setValue(a[this.name])}});EUI.MonthField=function(){return new EUI.form.MonthField(arguments[0])};EUI.form.MonthField=EUI.extend(EUI.form.TriggerField,{triggerCss:"ux-date-trigger",triggerClickCss:"",data:null,listWidth:318,value:"",monthUnit:"期",initComponent:function(){if(this.value){this.year=this.value.substring(0,4);this.month=parseInt(this.value.substring(4,6))}EUI.form.MonthField.superclass.initComponent.call(this)},getType:function(){return"MonthField"},afterRender:function(){var a=this;if(this.value){this.setValue(a.year+"年第"+a.month+a.monthUnit)}EUI.form.MonthField.superclass.afterRender.call(this)},showList:function(){var a=this;if(a.list){a.setListPos()}else{a.initList()}},initList:function(){var a=this;var b=$("<div class='ux-mf-list'><div class='ux-mf-top'>"+this.initYear()+this.initMonth()+"</div>"+this.initBottom()+"</div>");b.attr("euiid",a.id).addClass(a.listCss);a.list=b;$("body").append(b);a.setListPos();$("span[index='"+this.month+"']",this.list).addClass("selected");this.initListEvents()},initYear:function(){if(!this.data){return}var b="<div class='ux-mf-yearbox'>";for(var a=this.data[0];a<=this.data[1];a++){if(a!=this.year){b+="<div index='"+a+"'>"+a+"年</div>"}else{b+="<div class='selected' index='"+a+"'>"+a+"年</div>"}}return b+"</div>"},initMonth:function(){return"<div class='ux-mf-monthbox'><div><span index='1'>1"+this.monthUnit+"</span><span index='2'>2"+this.monthUnit+"</span><span index='3'>3"+this.monthUnit+"</span></div><div><span index='4'>4"+this.monthUnit+"</span><span index='5'>5"+this.monthUnit+"</span><span index='6'>6"+this.monthUnit+"</span></div><div><span index='7'>7"+this.monthUnit+"</span><span index='8'>8"+this.monthUnit+"</span><span index='9'>9"+this.monthUnit+"</span></div><div><span index='10'>10"+this.monthUnit+"</span><span index='11'>11"+this.monthUnit+"</span><span index='12'>12"+this.monthUnit+"</span></div></div>"},initBottom:function(){return"<div class='ux-mf-bottom'><div class='ux-button opt-cancel'>取消</div><div class='ux-button-select opt-ok'>确定</div></div>"},initListEvents:function(){var a=this;EUI.form.MonthField.superclass.addEvents.call(this);$(".opt-ok",this.list).bind("click",function(){if(a.year&&a.month){a.setValue(a.year+"年第"+a.month+a.monthUnit);a.hideList()}a.afterSelect&&a.afterSelect.call(a,a.year,a.month);return false});$(".opt-cancel",this.list).bind("click",function(){a.hideList();return false});$("span",this.list).bind("click",function(){if($(this).hasClass("selected")){return false}a.month=$(this).attr("index");$("span.selected",a.list).removeClass("selected");$(this).addClass("selected");return false});$("div",".ux-mf-yearbox").bind("click",function(){if($(this).hasClass("selected")){return false}a.year=$(this).attr("index");$("div.selected",a.list).removeClass("selected");$(this).addClass("selected");return false})},getValue:function(){var a=this;if(a.year&&a.month){return a.year+""+(a.month>9?a.month:"0"+a.month)}return""}});EUI.NumberField=function(){return new EUI.form.NumberField(arguments[0])};EUI.form.NumberField=EUI.extend(EUI.form.TextField,{maxValue:Number.MAX_VALUE,minValue:Number.NEGATIVE_INFINITY,precision:0,allowNegative:true,allowChar:"0123456789",fullPrecision:true,initComponent:function(){EUI.form.NumberField.superclass.initComponent.call(this);if(!this.allowNegative){this.minValue=this.minValue>0?this.minValue:0}else{this.allowChar+="-"}if(this.precision>0){this.allowChar+="."}},getType:function(){return"NumberField"},render:function(){EUI.form.NumberField.superclass.render.call(this);this.setValue(this.value)},initField:function(){EUI.form.NumberField.superclass.initField.call(this);this.dom.field.css({"ime-mode":"disabled"})},addEvents:function(){var a=this;this.dom.field.bind("blur",function(c){var b=a.getValue();if(!b){return}if(a.precision>=0){if(isNaN(b)){b=a.getValue()}a.setValue(b)}else{throw new Error(a.negPrecision)}});EUI.form.NumberField.superclass.addEvents.call(this)},sysValidater:function(){var b=this;var a=EUI.form.NumberField.superclass.sysValidater.call(this);if(!a){return false}else{var c=EUI.form.NumberField.superclass.getValue.call(this);if(c){if(!$.isNumeric(c)){b.invalidText=b.notNumberText;b.afterValid(false);return false}}if(!this.checkValue()){b.afterValid(false);return false}}return true},checkValue:function(){var a=this;var b=a.getValue();if(!b){b=0}var c=a.title?a.title:"此项";if(b<a.minValue){a.invalidText=String.format(a.minValueText,c,a.minValue);return false}if(b>a.maxValue){a.invalidText=String.format(a.maxValueText,c,a.maxValue);return false}return true},getValue:function(){var a=EUI.form.NumberField.superclass.getValue.call(this);if(a){return parseFloat(a)}else{return 0}},setValue:function(c){if(c||c===0){var d=c+"";var a=d.indexOf(".");var b=0;if(a!=-1){b=d.length-a-1}if(this.fullPrecision||b>this.precision){c=parseFloat(c).toFixed(this.precision)}else{c=parseFloat(c)}EUI.form.NumberField.superclass.setValue.call(this,c)}}});EUI.TextArea=function(){return new EUI.form.TextArea(arguments[0])};EUI.form.TextArea=EUI.extend(EUI.form.TextField,{width:160,height:60,autoHeight:false,initComponent:function(){EUI.form.TextArea.superclass.initComponent.call(this)},getType:function(){return"TextArea"},initField:function(){var b=this;var a=$("<textarea></textarea>");a.addClass("ux-field-textarea");b.dom.field=a;var c=$("<div class='ux-field-element'></div>");c.append(b.dom.field);b.dom.fieldwrap=c;b.dom.append(c).append("<div class='ux-clear'> </div>");b.setWidth(b.width);b.setHeight(b.height);b.initDisplayText()},loadData:function(){EUI.form.TextArea.superclass.loadData.call(this,arguments[0]);if(this.autoHeight){var a=this.dom.field[0].scrollHeight-parseFloat(this.dom.field.css("borderTopWidth"))-parseFloat(this.dom.field.css("borderBottomWidth"));if(a>this.height){this.dom.height(a+4);this.dom.field.height(a)}}}});EUI.IconField=function(){return new EUI.form.IconField(arguments[0])};EUI.form.IconField=EUI.extend(EUI.form.TextField,{iconCss:null,onClick:null,baseTrigger:"ux-iconfield-basetrigger",baseClear:"ux-iconfield-baseclear",canClear:false,clearCss:"ux-iconfield-clearbtn",clearIcon:"ux-iconfield-icon",placeholder:null,afterClear:null,initComponent:function(){EUI.form.IconField.superclass.initComponent.call(this)},getType:function(){return"IconField"},initField:function(){EUI.form.IconField.superclass.initField.call(this);if(this.placeholder){this.dom.field.attr("placeholder",this.placeholder)}if(!this.editable){this.dom.field.attr("readonly",true);this.dom.field.addClass("ux-hand")}this.initIcon();if(this.readonly){this.setReadOnly(true)}},initIcon:function(){var c=this;var b=$("<span class='"+this.baseTrigger+" "+this.iconCss+"'></span>");var a=$("<span class='"+this.baseClear+"'></span>");if(c.canClear){c.dom.field.after(a);c.clearBtn=a}c.dom.field.after(b);if(c.readonly){b.hide();a.hide()}},addEvents:function(){var a=this;if(this.onClick){if(this.readonly){return}a.dom.field.bind("click",function(){a.onClick&&a.onClick.call(a)});$(".ux-iconfield-clearbtn").live("click",function(){a.dom.field.val("");$(this).removeClass("ux-iconfield-icon");$(this).removeClass("ux-iconfield-clearbtn");a.afterClear&&a.afterClear.call(a)})}},setWidth:function(){var a=parseInt(arguments[0]);if(a){if(typeof arguments[0]=="string"&&arguments[0].indexOf("%")>-1){a/=100;a*=this.dom.parent().width();if(this.dom.label){if(!this.labelWidth){if(a*7/23<40){this.setLabelWidth(40);a-=40}if(a*7/23>70){this.setLabelWidth(70);a-=70}else{this.setLabelWidth(a*7/23);a-=(a*7/23)}}else{this.setLabelWidth(this.labelWidth);a-=this.labelWidth}}a-=10}a-=22;this.dom.field.width(a);this.width=arguments[0]}}});
